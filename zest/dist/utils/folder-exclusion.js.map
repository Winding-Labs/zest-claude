{
  "version": 3,
  "sources": ["../src/utils/folder-exclusion.ts"],
  "sourcesContent": [
    "/**\n * Folder exclusion utilities\n *\n * Handles checking if a folder path is excluded from Zest tracking\n */\n\nimport { normalize, resolve, sep } from \"node:path\";\nimport type { UserSettings } from \"../config/settings.js\";\n\n/**\n * Check if the current platform uses case-insensitive filesystem\n */\nfunction isCaseInsensitiveFilesystem(): boolean {\n  return process.platform === \"win32\" || process.platform === \"darwin\";\n}\n\n/**\n * Normalize path for comparison, handling case-insensitive filesystems\n */\nfunction normalizeForComparison(path: string): string {\n  const normalized = normalize(resolve(path));\n  return isCaseInsensitiveFilesystem() ? normalized.toLowerCase() : normalized;\n}\n\n/**\n * Check if a folder path is excluded from tracking\n *\n * @param folderPath - The folder path to check\n * @param settings - User settings containing excludedFolders list\n * @returns true if the folder (or any parent) is in the exclusion list\n */\nexport function isFolderExcluded(folderPath: string, settings: UserSettings): boolean {\n  const comparePath = normalizeForComparison(folderPath);\n  const separatorForComparison = isCaseInsensitiveFilesystem() ? sep.toLowerCase() : sep;\n\n  return settings.excludedFolders.some((excluded) => {\n    const compareExcluded = normalizeForComparison(excluded);\n    // Check if path equals or is inside excluded folder\n    return (\n      comparePath === compareExcluded ||\n      comparePath.startsWith(compareExcluded + separatorForComparison)\n    );\n  });\n}\n\n/**\n * Add a folder to the exclusion list\n *\n * @param folderPath - The folder path to exclude\n * @param settings - User settings to modify\n * @returns Updated settings with the folder added (or unchanged if already present)\n */\nexport function addExcludedFolder(\n  folderPath: string,\n  settings: UserSettings,\n): { settings: UserSettings; alreadyExcluded: boolean } {\n  const normalizedPath = normalize(resolve(folderPath));\n  const comparePath = normalizeForComparison(folderPath);\n\n  // Check if already excluded (case-insensitive on Windows/macOS)\n  const alreadyExists = settings.excludedFolders.some(\n    (f) => normalizeForComparison(f) === comparePath,\n  );\n\n  if (alreadyExists) {\n    return { settings, alreadyExcluded: true };\n  }\n\n  return {\n    settings: {\n      ...settings,\n      excludedFolders: [...settings.excludedFolders, normalizedPath],\n    },\n    alreadyExcluded: false,\n  };\n}\n\n/**\n * Remove a folder from the exclusion list\n *\n * @param folderPath - The folder path to remove from exclusion\n * @param settings - User settings to modify\n * @returns Updated settings with the folder removed (or unchanged if not present)\n */\nexport function removeExcludedFolder(\n  folderPath: string,\n  settings: UserSettings,\n): { settings: UserSettings; wasExcluded: boolean } {\n  const comparePath = normalizeForComparison(folderPath);\n\n  // Find and remove matching folder (case-insensitive on Windows/macOS)\n  const matchIndex = settings.excludedFolders.findIndex(\n    (f) => normalizeForComparison(f) === comparePath,\n  );\n\n  if (matchIndex === -1) {\n    return { settings, wasExcluded: false };\n  }\n\n  return {\n    settings: {\n      ...settings,\n      excludedFolders: settings.excludedFolders.filter((_, i) => i !== matchIndex),\n    },\n    wasExcluded: true,\n  };\n}\n"
  ],
  "mappings": ";AAMA;AAMA,SAAS,2BAA2B,GAAY;AAAA,EAC9C,OAAO,QAAQ,aAAa,WAAW,QAAQ,aAAa;AAAA;AAM9D,SAAS,sBAAsB,CAAC,MAAsB;AAAA,EACpD,MAAM,aAAa,UAAU,QAAQ,IAAI,CAAC;AAAA,EAC1C,OAAO,4BAA4B,IAAI,WAAW,YAAY,IAAI;AAAA;AAU7D,SAAS,gBAAgB,CAAC,YAAoB,UAAiC;AAAA,EACpF,MAAM,cAAc,uBAAuB,UAAU;AAAA,EACrD,MAAM,yBAAyB,4BAA4B,IAAI,IAAI,YAAY,IAAI;AAAA,EAEnF,OAAO,SAAS,gBAAgB,KAAK,CAAC,aAAa;AAAA,IACjD,MAAM,kBAAkB,uBAAuB,QAAQ;AAAA,IAEvD,OACE,gBAAgB,mBAChB,YAAY,WAAW,kBAAkB,sBAAsB;AAAA,GAElE;AAAA;AAUI,SAAS,iBAAiB,CAC/B,YACA,UACsD;AAAA,EACtD,MAAM,iBAAiB,UAAU,QAAQ,UAAU,CAAC;AAAA,EACpD,MAAM,cAAc,uBAAuB,UAAU;AAAA,EAGrD,MAAM,gBAAgB,SAAS,gBAAgB,KAC7C,CAAC,MAAM,uBAAuB,CAAC,MAAM,WACvC;AAAA,EAEA,IAAI,eAAe;AAAA,IACjB,OAAO,EAAE,UAAU,iBAAiB,KAAK;AAAA,EAC3C;AAAA,EAEA,OAAO;AAAA,IACL,UAAU;AAAA,SACL;AAAA,MACH,iBAAiB,CAAC,GAAG,SAAS,iBAAiB,cAAc;AAAA,IAC/D;AAAA,IACA,iBAAiB;AAAA,EACnB;AAAA;AAUK,SAAS,oBAAoB,CAClC,YACA,UACkD;AAAA,EAClD,MAAM,cAAc,uBAAuB,UAAU;AAAA,EAGrD,MAAM,aAAa,SAAS,gBAAgB,UAC1C,CAAC,MAAM,uBAAuB,CAAC,MAAM,WACvC;AAAA,EAEA,IAAI,eAAe,IAAI;AAAA,IACrB,OAAO,EAAE,UAAU,aAAa,MAAM;AAAA,EACxC;AAAA,EAEA,OAAO;AAAA,IACL,UAAU;AAAA,SACL;AAAA,MACH,iBAAiB,SAAS,gBAAgB,OAAO,CAAC,GAAG,MAAM,MAAM,UAAU;AAAA,IAC7E;AAAA,IACA,aAAa;AAAA,EACf;AAAA;",
  "debugId": "6B33F46D18F0560464756E2164756E21",
  "names": []
}