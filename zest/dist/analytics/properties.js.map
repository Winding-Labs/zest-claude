{
  "version": 3,
  "sources": ["../src/analytics/properties.ts"],
  "sourcesContent": [
    "/**\r\n * Property builders for error-specific context\r\n *\r\n * These helpers create structured properties for different error categories.\r\n */\r\n\r\nimport { basename } from \"node:path\";\r\n\r\n/**\r\n * Properties for authentication errors\r\n */\r\nexport function buildAuthProperties(options: {\r\n  authMethod: \"device_code\" | \"token_refresh\";\r\n  responseStatus?: number;\r\n  timeUntilExpiry?: number;\r\n}): Record<string, unknown> {\r\n  return {\r\n    auth_method: options.authMethod,\r\n    ...(options.responseStatus !== undefined && { response_status: options.responseStatus }),\r\n    ...(options.timeUntilExpiry !== undefined && { time_until_expiry: options.timeUntilExpiry }),\r\n  };\r\n}\r\n\r\n/**\r\n * Properties for sync errors\r\n */\r\nexport function buildSyncProperties(options: {\r\n  syncErrorType?: \"network_error\" | \"upload_failed\" | \"not_authenticated\";\r\n  eventsAttempted?: number;\r\n  sessionsAttempted?: number;\r\n  messagesAttempted?: number;\r\n  retryAttempt?: number;\r\n}): Record<string, unknown> {\r\n  return {\r\n    ...(options.syncErrorType && { sync_error_type: options.syncErrorType }),\r\n    ...(options.eventsAttempted !== undefined && { events_attempted: options.eventsAttempted }),\r\n    ...(options.sessionsAttempted !== undefined && { sessions_attempted: options.sessionsAttempted }),\r\n    ...(options.messagesAttempted !== undefined && { messages_attempted: options.messagesAttempted }),\r\n    ...(options.retryAttempt !== undefined && { retry_attempt: options.retryAttempt }),\r\n  };\r\n}\r\n\r\n/**\r\n * Properties for file system errors\r\n */\r\nexport function buildFileSystemProperties(options: {\r\n  filePath?: string;\r\n  operation: \"read\" | \"write\" | \"lock\";\r\n  errnoCode?: string;\r\n}): Record<string, unknown> {\r\n  // Anonymize file path - only keep the filename, not the full path (cross-platform)\r\n  const anonymizedPath = options.filePath ? basename(options.filePath) : undefined;\r\n\r\n  return {\r\n    ...(anonymizedPath && { file_name: anonymizedPath }),\r\n    operation: options.operation,\r\n    ...(options.errnoCode && { errno_code: options.errnoCode }),\r\n  };\r\n}\r\n\r\n/**\r\n * Properties for daemon errors\r\n */\r\nexport function buildDaemonProperties(options: {\r\n  operation: \"start\" | \"restart\" | \"sync_cycle\";\r\n  pid?: number;\r\n}): Record<string, unknown> {\r\n  return {\r\n    daemon_operation: options.operation,\r\n    ...(options.pid !== undefined && { daemon_pid: options.pid }),\r\n  };\r\n}\r\n\r\n/**\r\n * Properties for API errors\r\n */\r\nexport function buildApiProperties(options: {\r\n  endpoint?: string;\r\n  responseStatus?: number;\r\n  responseMessage?: string;\r\n}): Record<string, unknown> {\r\n  return {\r\n    ...(options.endpoint && { api_endpoint: options.endpoint }),\r\n    ...(options.responseStatus !== undefined && { response_status: options.responseStatus }),\r\n    ...(options.responseMessage && { response_message: options.responseMessage }),\r\n  };\r\n}\r\n"
  ],
  "mappings": ";AAMA;AAKO,SAAS,mBAAmB,CAAC,SAIR;AAAA,EAC1B,OAAO;AAAA,IACL,aAAa,QAAQ;AAAA,OACjB,QAAQ,mBAAmB,aAAa,EAAE,iBAAiB,QAAQ,eAAe;AAAA,OAClF,QAAQ,oBAAoB,aAAa,EAAE,mBAAmB,QAAQ,gBAAgB;AAAA,EAC5F;AAAA;AAMK,SAAS,mBAAmB,CAAC,SAMR;AAAA,EAC1B,OAAO;AAAA,OACD,QAAQ,iBAAiB,EAAE,iBAAiB,QAAQ,cAAc;AAAA,OAClE,QAAQ,oBAAoB,aAAa,EAAE,kBAAkB,QAAQ,gBAAgB;AAAA,OACrF,QAAQ,sBAAsB,aAAa,EAAE,oBAAoB,QAAQ,kBAAkB;AAAA,OAC3F,QAAQ,sBAAsB,aAAa,EAAE,oBAAoB,QAAQ,kBAAkB;AAAA,OAC3F,QAAQ,iBAAiB,aAAa,EAAE,eAAe,QAAQ,aAAa;AAAA,EAClF;AAAA;AAMK,SAAS,yBAAyB,CAAC,SAId;AAAA,EAE1B,MAAM,iBAAiB,QAAQ,WAAW,SAAS,QAAQ,QAAQ,IAAI;AAAA,EAEvE,OAAO;AAAA,OACD,kBAAkB,EAAE,WAAW,eAAe;AAAA,IAClD,WAAW,QAAQ;AAAA,OACf,QAAQ,aAAa,EAAE,YAAY,QAAQ,UAAU;AAAA,EAC3D;AAAA;AAMK,SAAS,qBAAqB,CAAC,SAGV;AAAA,EAC1B,OAAO;AAAA,IACL,kBAAkB,QAAQ;AAAA,OACtB,QAAQ,QAAQ,aAAa,EAAE,YAAY,QAAQ,IAAI;AAAA,EAC7D;AAAA;AAMK,SAAS,kBAAkB,CAAC,SAIP;AAAA,EAC1B,OAAO;AAAA,OACD,QAAQ,YAAY,EAAE,cAAc,QAAQ,SAAS;AAAA,OACrD,QAAQ,mBAAmB,aAAa,EAAE,iBAAiB,QAAQ,eAAe;AAAA,OAClF,QAAQ,mBAAmB,EAAE,kBAAkB,QAAQ,gBAAgB;AAAA,EAC7E;AAAA;",
  "debugId": "0FED7F98124E99CD64756E2164756E21",
  "names": []
}