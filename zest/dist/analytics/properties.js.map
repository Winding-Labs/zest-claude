{
  "version": 3,
  "sources": ["../src/analytics/properties.ts"],
  "sourcesContent": [
    "/**\n * Property builders for error-specific context\n *\n * These helpers create structured properties for different error categories.\n */\n\nimport { basename } from \"node:path\";\n\n/**\n * Properties for authentication errors\n */\nexport function buildAuthProperties(options: {\n  authMethod: \"device_code\" | \"token_refresh\";\n  responseStatus?: number;\n  timeUntilExpiry?: number;\n}): Record<string, unknown> {\n  return {\n    auth_method: options.authMethod,\n    ...(options.responseStatus !== undefined && { response_status: options.responseStatus }),\n    ...(options.timeUntilExpiry !== undefined && { time_until_expiry: options.timeUntilExpiry }),\n  };\n}\n\n/**\n * Properties for sync errors\n */\nexport function buildSyncProperties(options: {\n  syncErrorType?: \"network_error\" | \"upload_failed\" | \"not_authenticated\";\n  eventsAttempted?: number;\n  sessionsAttempted?: number;\n  messagesAttempted?: number;\n  retryAttempt?: number;\n}): Record<string, unknown> {\n  return {\n    ...(options.syncErrorType && { sync_error_type: options.syncErrorType }),\n    ...(options.eventsAttempted !== undefined && { events_attempted: options.eventsAttempted }),\n    ...(options.sessionsAttempted !== undefined && {\n      sessions_attempted: options.sessionsAttempted,\n    }),\n    ...(options.messagesAttempted !== undefined && {\n      messages_attempted: options.messagesAttempted,\n    }),\n    ...(options.retryAttempt !== undefined && { retry_attempt: options.retryAttempt }),\n  };\n}\n\n/**\n * Properties for file system errors\n */\nexport function buildFileSystemProperties(options: {\n  filePath?: string;\n  operation: \"read\" | \"write\" | \"lock\";\n  errnoCode?: string;\n}): Record<string, unknown> {\n  // Anonymize file path - only keep the filename, not the full path (cross-platform)\n  const anonymizedPath = options.filePath ? basename(options.filePath) : undefined;\n\n  return {\n    ...(anonymizedPath && { file_name: anonymizedPath }),\n    operation: options.operation,\n    ...(options.errnoCode && { errno_code: options.errnoCode }),\n  };\n}\n\n/**\n * Properties for daemon errors\n */\nexport function buildDaemonProperties(options: {\n  operation: \"start\" | \"restart\" | \"sync_cycle\";\n  pid?: number;\n}): Record<string, unknown> {\n  return {\n    daemon_operation: options.operation,\n    ...(options.pid !== undefined && { daemon_pid: options.pid }),\n  };\n}\n\n/**\n * Properties for API errors\n */\nexport function buildApiProperties(options: {\n  endpoint?: string;\n  responseStatus?: number;\n  responseMessage?: string;\n}): Record<string, unknown> {\n  return {\n    ...(options.endpoint && { api_endpoint: options.endpoint }),\n    ...(options.responseStatus !== undefined && { response_status: options.responseStatus }),\n    ...(options.responseMessage && { response_message: options.responseMessage }),\n  };\n}\n"
  ],
  "mappings": ";AAMA;AAKO,SAAS,mBAAmB,CAAC,SAIR;AAAA,EAC1B,OAAO;AAAA,IACL,aAAa,QAAQ;AAAA,OACjB,QAAQ,mBAAmB,aAAa,EAAE,iBAAiB,QAAQ,eAAe;AAAA,OAClF,QAAQ,oBAAoB,aAAa,EAAE,mBAAmB,QAAQ,gBAAgB;AAAA,EAC5F;AAAA;AAMK,SAAS,mBAAmB,CAAC,SAMR;AAAA,EAC1B,OAAO;AAAA,OACD,QAAQ,iBAAiB,EAAE,iBAAiB,QAAQ,cAAc;AAAA,OAClE,QAAQ,oBAAoB,aAAa,EAAE,kBAAkB,QAAQ,gBAAgB;AAAA,OACrF,QAAQ,sBAAsB,aAAa;AAAA,MAC7C,oBAAoB,QAAQ;AAAA,IAC9B;AAAA,OACI,QAAQ,sBAAsB,aAAa;AAAA,MAC7C,oBAAoB,QAAQ;AAAA,IAC9B;AAAA,OACI,QAAQ,iBAAiB,aAAa,EAAE,eAAe,QAAQ,aAAa;AAAA,EAClF;AAAA;AAMK,SAAS,yBAAyB,CAAC,SAId;AAAA,EAE1B,MAAM,iBAAiB,QAAQ,WAAW,SAAS,QAAQ,QAAQ,IAAI;AAAA,EAEvE,OAAO;AAAA,OACD,kBAAkB,EAAE,WAAW,eAAe;AAAA,IAClD,WAAW,QAAQ;AAAA,OACf,QAAQ,aAAa,EAAE,YAAY,QAAQ,UAAU;AAAA,EAC3D;AAAA;AAMK,SAAS,qBAAqB,CAAC,SAGV;AAAA,EAC1B,OAAO;AAAA,IACL,kBAAkB,QAAQ;AAAA,OACtB,QAAQ,QAAQ,aAAa,EAAE,YAAY,QAAQ,IAAI;AAAA,EAC7D;AAAA;AAMK,SAAS,kBAAkB,CAAC,SAIP;AAAA,EAC1B,OAAO;AAAA,OACD,QAAQ,YAAY,EAAE,cAAc,QAAQ,SAAS;AAAA,OACrD,QAAQ,mBAAmB,aAAa,EAAE,iBAAiB,QAAQ,eAAe;AAAA,OAClF,QAAQ,mBAAmB,EAAE,kBAAkB,QAAQ,gBAAgB;AAAA,EAC7E;AAAA;",
  "debugId": "22EB388A31B6720264756E2164756E21",
  "names": []
}