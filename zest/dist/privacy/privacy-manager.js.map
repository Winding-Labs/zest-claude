{
  "version": 3,
  "sources": ["../../../packages/privacy-redaction/src/config/defaults.ts", "../../../packages/privacy-redaction/src/detection/cache.ts", "../../../packages/privacy-redaction/src/patterns/sensitive-patterns.ts", "../../../packages/privacy-redaction/src/patterns/categories.ts", "../../../packages/privacy-redaction/src/detection/detector.ts", "../../../packages/privacy-redaction/src/exclusion/built-in-rules.ts", "../../../packages/privacy-redaction/src/exclusion/glob-matcher.ts", "../../../packages/privacy-redaction/src/exclusion/gitignore-parser.ts", "../../../packages/privacy-redaction/src/exclusion/zest-rules-parser.ts", "../../../packages/privacy-redaction/src/exclusion/exclusion-service.ts", "../../../packages/privacy-redaction/src/redaction/strategies.ts", "../../../packages/privacy-redaction/src/redaction/redactor.ts", "../../../packages/privacy-redaction/src/privacy-service.ts", "../src/utils/logger.ts", "../src/utils/fs-utils.ts", "../src/utils/log-rotation.ts", "../src/config/constants.ts", "../src/privacy/node-fs-adapter.ts", "../src/privacy/privacy-manager.ts"],
  "sourcesContent": [
    "/**\n * Default configuration values for the privacy-redaction package.\n */\n\nimport type { PrivacyConfig } from \"../types\";\n\n/** 10 MB default max file size */\nconst DEFAULT_MAX_FILE_SIZE_BYTES = 10 * 1024 * 1024;\n\n/**\n * Default privacy configuration.\n * Provides sensible defaults for most use cases.\n */\nexport const DEFAULT_PRIVACY_CONFIG: PrivacyConfig = {\n  approach: \"detection\",\n  aggressiveMode: false,\n  enabledPatterns: [], // Empty means use all default (non-aggressive) patterns\n  enableGitignore: true,\n  enableZestRules: true,\n  customExclusionPatterns: [],\n  maxFileSizeBytes: DEFAULT_MAX_FILE_SIZE_BYTES,\n};\n\n/**\n * Create a privacy config by merging partial config with defaults.\n */\nexport function createPrivacyConfig(partial?: Partial<PrivacyConfig>): PrivacyConfig {\n  if (!partial) {\n    return { ...DEFAULT_PRIVACY_CONFIG };\n  }\n\n  return {\n    ...DEFAULT_PRIVACY_CONFIG,\n    ...partial,\n    // Ensure arrays are properly merged (not replaced with empty)\n    enabledPatterns: partial.enabledPatterns ?? DEFAULT_PRIVACY_CONFIG.enabledPatterns,\n    customExclusionPatterns:\n      partial.customExclusionPatterns ?? DEFAULT_PRIVACY_CONFIG.customExclusionPatterns,\n  };\n}\n\n/**\n * Validate a privacy config and return any issues.\n */\nexport function validatePrivacyConfig(config: PrivacyConfig): { valid: boolean; issues: string[] } {\n  const issues: string[] = [];\n\n  if (![\"detection\", \"encryption\", \"hybrid\"].includes(config.approach)) {\n    issues.push(`Invalid approach: ${config.approach}`);\n  }\n\n  if (typeof config.aggressiveMode !== \"boolean\") {\n    issues.push(\"aggressiveMode must be a boolean\");\n  }\n\n  if (!Array.isArray(config.enabledPatterns)) {\n    issues.push(\"enabledPatterns must be an array\");\n  }\n\n  if (typeof config.enableGitignore !== \"boolean\") {\n    issues.push(\"enableGitignore must be a boolean\");\n  }\n\n  if (typeof config.enableZestRules !== \"boolean\") {\n    issues.push(\"enableZestRules must be a boolean\");\n  }\n\n  if (!Array.isArray(config.customExclusionPatterns)) {\n    issues.push(\"customExclusionPatterns must be an array\");\n  }\n\n  if (typeof config.maxFileSizeBytes !== \"number\" || config.maxFileSizeBytes <= 0) {\n    issues.push(\"maxFileSizeBytes must be a positive number\");\n  }\n\n  return {\n    valid: issues.length === 0,\n    issues,\n  };\n}\n",
    "/**\n * Content caching utilities for avoiding redundant scans.\n *\n * Provides a simple hash-based cache to track previously scanned content\n * and avoid re-scanning identical strings.\n */\n\n/**\n * Options for the detection cache.\n */\nexport interface DetectionCacheOptions {\n  /** Maximum number of entries to keep in the cache (default: 1000) */\n  maxEntries?: number;\n  /** Time-to-live for cache entries in milliseconds (default: 5 minutes) */\n  ttlMs?: number;\n}\n\n/**\n * Cache entry with timestamp for TTL support.\n */\ninterface CacheEntry<T> {\n  value: T;\n  timestamp: number;\n}\n\n/**\n * LRU cache with TTL support for detection results.\n */\nexport class DetectionCache<T> {\n  private cache: Map<string, CacheEntry<T>> = new Map();\n  private readonly maxEntries: number;\n  private readonly ttlMs: number;\n\n  constructor(options: DetectionCacheOptions = {}) {\n    this.maxEntries = options.maxEntries ?? 1000;\n    this.ttlMs = options.ttlMs ?? 5 * 60 * 1000; // 5 minutes default\n  }\n\n  /**\n   * Get a cached value by key.\n   * Returns undefined if not found or expired.\n   */\n  get(key: string): T | undefined {\n    const entry = this.cache.get(key);\n    if (!entry) {\n      return undefined;\n    }\n\n    // Check TTL\n    if (Date.now() - entry.timestamp > this.ttlMs) {\n      this.cache.delete(key);\n      return undefined;\n    }\n\n    // Move to end for LRU behavior\n    this.cache.delete(key);\n    this.cache.set(key, entry);\n\n    return entry.value;\n  }\n\n  /**\n   * Set a cached value.\n   */\n  set(key: string, value: T): void {\n    // Evict oldest entries if at capacity\n    if (this.cache.size >= this.maxEntries) {\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        this.cache.delete(firstKey);\n      }\n    }\n\n    this.cache.set(key, {\n      value,\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Check if a key exists and is not expired.\n   */\n  has(key: string): boolean {\n    return this.get(key) !== undefined;\n  }\n\n  /**\n   * Remove a specific key from the cache.\n   */\n  delete(key: string): boolean {\n    return this.cache.delete(key);\n  }\n\n  /**\n   * Clear all cached entries.\n   */\n  clear(): void {\n    this.cache.clear();\n  }\n\n  /**\n   * Get the number of cached entries.\n   */\n  get size(): number {\n    return this.cache.size;\n  }\n\n  /**\n   * Remove all expired entries.\n   */\n  prune(): number {\n    const now = Date.now();\n    let pruned = 0;\n    const keysToDelete: string[] = [];\n\n    this.cache.forEach((entry, key) => {\n      if (now - entry.timestamp > this.ttlMs) {\n        keysToDelete.push(key);\n      }\n    });\n\n    for (const key of keysToDelete) {\n      this.cache.delete(key);\n      pruned++;\n    }\n\n    return pruned;\n  }\n}\n\n/**\n * Generate a simple hash for content.\n * Used as a cache key to identify previously scanned content.\n *\n * Note: This is NOT cryptographically secure. It's designed for fast\n * content comparison, not security purposes.\n */\nexport function computeContentHash(content: string): string {\n  let hash = 0;\n  for (let i = 0; i < content.length; i++) {\n    const char = content.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  return Math.abs(hash).toString(36);\n}\n\n/**\n * Generate a cache key from content and optional context.\n */\nexport function generateCacheKey(content: string, context?: string): string {\n  const contentHash = computeContentHash(content);\n  if (context) {\n    const contextHash = computeContentHash(context);\n    return `${contentHash}:${contextHash}`;\n  }\n  return contentHash;\n}\n",
    "/**\n * Sensitive data patterns for detecting various types of secrets, tokens, and credentials.\n *\n * Patterns are organized by category for better maintainability.\n * Each pattern includes metadata for proper handling during detection and redaction.\n */\n\nimport type { PatternCategory, SensitivePattern } from \"../types\";\n\n/**\n * Helper to create a SensitivePattern with defaults.\n */\nfunction createPattern(\n  name: string,\n  description: string,\n  regex: RegExp,\n  category: PatternCategory,\n  options: {\n    redactionStrategy?: \"full\" | \"partial\";\n    aggressiveOnly?: boolean;\n    highlySensitive?: boolean;\n    priority?: number;\n  } = {},\n): SensitivePattern {\n  return {\n    name,\n    description,\n    regex,\n    category,\n    redactionStrategy: options.redactionStrategy ?? \"full\",\n    aggressiveOnly: options.aggressiveOnly ?? false,\n    highlySensitive: options.highlySensitive ?? false,\n    priority: options.priority ?? 50,\n  };\n}\n\n/**\n * Comprehensive collection of sensitive data patterns.\n * Organized by category for better maintainability.\n */\nexport const SENSITIVE_DATA_PATTERNS: SensitivePattern[] = [\n  // =============================================================================\n  // API KEYS AND GENERIC TOKENS\n  // =============================================================================\n\n  createPattern(\n    \"api_key\",\n    \"API keys and access keys (quoted)\",\n    /(?:api[_-]?key|apikey|access[_-]?key|secret[_-]?key)[\"\\s]*[:=][\"\\s]*[\"']([^\"']{16,})[\"']/gi,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", priority: 60 },\n  ),\n\n  createPattern(\n    \"api_key_unquoted\",\n    \"API keys and access keys (unquoted)\",\n    /(?:api[_-]?key|apikey|access[_-]?key|secret[_-]?key)[\"\\s]*(?:[:=]|is)[\"\\s]*([a-zA-Z0-9_\\-=+/]{16,})(?=\\s|$|[^\\w\\-=+/])/gi,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", priority: 55 },\n  ),\n\n  createPattern(\n    \"jwt_token\",\n    \"JWT tokens\",\n    /eyJ[a-zA-Z0-9_\\-]*\\.eyJ[a-zA-Z0-9_\\-]*\\.[a-zA-Z0-9_\\-]*/g,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", priority: 70 },\n  ),\n\n  createPattern(\n    \"generic_secret\",\n    \"Generic secrets and passwords\",\n    /(?:password|passwd|pwd|secret|token|key)[\"\\s]*[:=][\"\\s]*[\"']([^\"'\\s]{8,})[\"']/gi,\n    \"generic\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 40 },\n  ),\n\n  // =============================================================================\n  // AWS CREDENTIALS\n  // =============================================================================\n\n  createPattern(\"aws_access_key\", \"AWS access keys\", /AKIA[0-9A-Z]{16}/g, \"cloud_services\", {\n    redactionStrategy: \"partial\",\n    highlySensitive: true,\n    priority: 90,\n  }),\n\n  createPattern(\n    \"aws_secret_key\",\n    \"AWS secret access keys\",\n    /(?:aws[_-]?secret[_-]?access[_-]?key)[\"\\s]*[:=][\"\\s]*([a-zA-Z0-9/+=]{40})/gi,\n    \"cloud_services\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 90 },\n  ),\n\n  // =============================================================================\n  // VERSION CONTROL & CODE HOSTING\n  // =============================================================================\n\n  createPattern(\n    \"github_token\",\n    \"GitHub personal access tokens\",\n    /gh[pousr]_[A-Za-z0-9_]{36,255}/g,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\n    \"github_app_token\",\n    \"GitHub App installation access tokens\",\n    /ghs_[A-Za-z0-9_]{36}/g,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\n    \"github_oauth_token\",\n    \"GitHub OAuth access tokens\",\n    /gho_[A-Za-z0-9_]{36}/g,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\n    \"gitlab_token\",\n    \"GitLab personal access tokens\",\n    /glpat-[A-Za-z0-9_\\-]{20}/g,\n    \"api_keys\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\"bitbucket_token\", \"Bitbucket app passwords\", /ATB[A-Za-z0-9]{95}/g, \"api_keys\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 85,\n  }),\n\n  createPattern(\"atlassian_token\", \"Atlassian API tokens\", /ATATT[A-Za-z0-9\\-_]{60}/g, \"api_keys\", {\n    redactionStrategy: \"full\",\n    priority: 80,\n  }),\n\n  // =============================================================================\n  // COMMUNICATION & COLLABORATION\n  // =============================================================================\n\n  createPattern(\"slack_token\", \"Slack API tokens\", /xox[baprs]-[A-Za-z0-9\\-]+/g, \"communication\", {\n    redactionStrategy: \"partial\",\n    highlySensitive: true,\n    priority: 80,\n  }),\n\n  createPattern(\n    \"discord_token\",\n    \"Discord bot tokens\",\n    /[MN][A-Za-z\\d]{23}\\.[\\w-]{6}\\.[\\w-]{27}/g,\n    \"communication\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 80 },\n  ),\n\n  // =============================================================================\n  // PAYMENT PROCESSING\n  // =============================================================================\n\n  createPattern(\"stripe_key\", \"Stripe live secret keys\", /sk_live_[A-Za-z0-9]{24}/g, \"payment\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 95,\n  }),\n\n  createPattern(\n    \"stripe_publishable_key\",\n    \"Stripe live publishable keys\",\n    /pk_live_[A-Za-z0-9]{24}/g,\n    \"payment\",\n    { redactionStrategy: \"partial\", priority: 70 },\n  ),\n\n  createPattern(\"paypal_client_id\", \"PayPal client IDs\", /A[A-Za-z0-9\\-_]{79}/g, \"payment\", {\n    redactionStrategy: \"partial\",\n    highlySensitive: true,\n    priority: 75,\n    aggressiveOnly: true,\n  }),\n\n  createPattern(\"square_token\", \"Square access tokens\", /sq0atp-[A-Za-z0-9\\-_]{22}/g, \"payment\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 85,\n  }),\n\n  createPattern(\"shopify_token\", \"Shopify access tokens\", /shpat_[a-fA-F0-9]{32}/g, \"payment\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 85,\n  }),\n\n  createPattern(\"shopify_secret\", \"Shopify shared secrets\", /shpss_[a-fA-F0-9]{32}/g, \"payment\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 85,\n  }),\n\n  // =============================================================================\n  // COMMUNICATION SERVICES\n  // =============================================================================\n\n  createPattern(\"twilio_token\", \"Twilio auth tokens\", /SK[a-f0-9]{32}/g, \"communication\", {\n    redactionStrategy: \"full\",\n    priority: 75,\n    aggressiveOnly: true,\n  }),\n\n  createPattern(\n    \"sendgrid_key\",\n    \"SendGrid API keys\",\n    /SG\\.[A-Za-z0-9\\-_]{22}\\.[A-Za-z0-9\\-_]{43}/g,\n    \"communication\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\"mailgun_key\", \"Mailgun API keys\", /key-[a-f0-9]{32}/g, \"communication\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 80,\n  }),\n\n  // =============================================================================\n  // CLOUD SERVICES\n  // =============================================================================\n\n  createPattern(\"firebase_key\", \"Firebase API keys\", /AIza[A-Za-z0-9\\-_]{35}/g, \"cloud_services\", {\n    redactionStrategy: \"partial\",\n    priority: 75,\n  }),\n\n  createPattern(\n    \"google_api_key\",\n    \"Google Cloud API keys\",\n    /AIza[A-Za-z0-9\\-_]{35}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 80 },\n  ),\n\n  createPattern(\n    \"azure_storage_key\",\n    \"Azure Storage account keys\",\n    /[A-Za-z0-9+/]{88}==/g,\n    \"cloud_services\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 70, aggressiveOnly: true },\n  ),\n\n  createPattern(\n    \"heroku_key\",\n    \"Heroku API keys\",\n    /[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 50, aggressiveOnly: true },\n  ),\n\n  createPattern(\n    \"digitalocean_token\",\n    \"DigitalOcean personal access tokens\",\n    /dop_v1_[a-f0-9]{64}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\n    \"cloudflare_token\",\n    \"Cloudflare API tokens (generic pattern)\",\n    /[A-Za-z0-9\\-_]{40}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 30, aggressiveOnly: true },\n  ),\n\n  // =============================================================================\n  // DEVELOPMENT PLATFORMS\n  // =============================================================================\n\n  createPattern(\"npm_token\", \"npm authentication tokens\", /npm_[A-Za-z0-9]{36}/g, \"api_keys\", {\n    redactionStrategy: \"full\",\n    priority: 80,\n  }),\n\n  createPattern(\n    \"docker_token\",\n    \"Docker Hub personal access tokens\",\n    /dckr_pat_[A-Za-z0-9\\-_]{36}/g,\n    \"api_keys\",\n    { redactionStrategy: \"full\", priority: 80 },\n  ),\n\n  createPattern(\n    \"vercel_token\",\n    \"Vercel access tokens\",\n    /vercel_[A-Za-z0-9]{24}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 80 },\n  ),\n\n  createPattern(\n    \"netlify_token\",\n    \"Netlify access tokens\",\n    /netlify_[A-Za-z0-9\\-_]{64}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 80 },\n  ),\n\n  createPattern(\n    \"railway_token\",\n    \"Railway API tokens\",\n    /railway_[A-Za-z0-9]{40}/g,\n    \"cloud_services\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 80 },\n  ),\n\n  // =============================================================================\n  // AI SERVICES\n  // =============================================================================\n\n  createPattern(\"openai_key\", \"OpenAI API keys\", /sk-[A-Za-z0-9]{48}/g, \"api_keys\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 90,\n  }),\n\n  createPattern(\"anthropic_key\", \"Anthropic API keys\", /sk-ant-[A-Za-z0-9\\-_]{95}/g, \"api_keys\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 90,\n  }),\n\n  // =============================================================================\n  // AUTHENTICATION & IDENTITY\n  // =============================================================================\n\n  createPattern(\n    \"auth0_secret\",\n    \"Auth0 client secrets (generic pattern)\",\n    /[A-Za-z0-9\\-_]{64}/g,\n    \"api_keys\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 25, aggressiveOnly: true },\n  ),\n\n  createPattern(\"okta_token\", \"Okta API tokens\", /00[A-Za-z0-9]{38}/g, \"api_keys\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 70,\n    aggressiveOnly: true,\n  }),\n\n  // =============================================================================\n  // DATABASE SERVICES\n  // =============================================================================\n\n  createPattern(\n    \"planetscale_password\",\n    \"PlanetScale database passwords\",\n    /pscale_pw_[A-Za-z0-9\\-_]{32}/g,\n    \"database\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 85 },\n  ),\n\n  createPattern(\n    \"mongodb_atlas\",\n    \"MongoDB Atlas connection strings\",\n    /mongodb\\+srv:\\/\\/[^:\\s]+:[^@\\s]+@[^\\/\\s]+\\.mongodb\\.net\\/[^\\s]*/gi,\n    \"database\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 90 },\n  ),\n\n  createPattern(\n    \"supabase_key\",\n    \"Supabase service role keys (JWT format)\",\n    /eyJ[A-Za-z0-9\\-_]*\\.eyJ[A-Za-z0-9\\-_]*\\.[A-Za-z0-9\\-_]*/g,\n    \"database\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 65 },\n  ),\n\n  createPattern(\n    \"db_connection\",\n    \"Database connection strings\",\n    /(?:mongodb|mysql|postgresql|postgres|redis|sqlite):\\/\\/[^\\s\\n\"']+/gi,\n    \"database\",\n    { redactionStrategy: \"partial\", highlySensitive: true, priority: 80 },\n  ),\n\n  // =============================================================================\n  // CRYPTOGRAPHIC KEYS\n  // =============================================================================\n\n  createPattern(\n    \"private_key\",\n    \"Private keys in PEM format\",\n    /-----BEGIN\\s+(?:RSA\\s+|EC\\s+|OPENSSH\\s+|DSA\\s+)?PRIVATE\\s+KEY-----[\\s\\S]*?-----END\\s+(?:RSA\\s+|EC\\s+|OPENSSH\\s+|DSA\\s+)?PRIVATE\\s+KEY-----/gi,\n    \"cryptographic\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 100 },\n  ),\n\n  // =============================================================================\n  // PERSONAL IDENTIFIABLE INFORMATION\n  // =============================================================================\n\n  createPattern(\n    \"email_in_config\",\n    \"Email addresses in configuration\",\n    /(?:email|user|username|admin)[\"\\s]*[:=][\"\\s]*([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})/gi,\n    \"pii\",\n    { redactionStrategy: \"partial\", priority: 60, aggressiveOnly: true },\n  ),\n\n  createPattern(\n    \"credit_card\",\n    \"Credit card numbers\",\n    /(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3[0-9]{13}|6(?:011|5[0-9]{2})[0-9]{12})/g,\n    \"pii\",\n    { redactionStrategy: \"full\", highlySensitive: true, priority: 95 },\n  ),\n\n  createPattern(\"ssn\", \"Social Security Numbers\", /\\b\\d{3}-\\d{2}-\\d{4}\\b/g, \"pii\", {\n    redactionStrategy: \"full\",\n    highlySensitive: true,\n    priority: 95,\n  }),\n\n  // =============================================================================\n  // NETWORK & INFRASTRUCTURE\n  // =============================================================================\n\n  createPattern(\n    \"private_ip\",\n    \"Private IP addresses\",\n    /\\b(?:10\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|172\\.(?:1[6-9]|2[0-9]|3[01])\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|192\\.168\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))\\b/g,\n    \"network\",\n    { redactionStrategy: \"partial\", priority: 50, aggressiveOnly: true },\n  ),\n];\n\n/**\n * Default patterns used when aggressive mode is disabled.\n * These are the most critical patterns that should always be detected.\n */\nexport const DEFAULT_PATTERN_NAMES: readonly string[] = [\n  // Core API keys and tokens\n  \"api_key\",\n  \"api_key_unquoted\",\n  \"jwt_token\",\n  \"generic_secret\",\n\n  // AWS credentials\n  \"aws_access_key\",\n  \"aws_secret_key\",\n\n  // Version control\n  \"github_token\",\n  \"github_app_token\",\n  \"github_oauth_token\",\n\n  // Critical services\n  \"private_key\",\n  \"stripe_key\",\n  \"openai_key\",\n  \"anthropic_key\",\n\n  // Communication\n  \"slack_token\",\n  \"discord_token\",\n  \"sendgrid_key\",\n\n  // Cloud services\n  \"firebase_key\",\n  \"google_api_key\",\n\n  // Development platforms\n  \"npm_token\",\n  \"docker_token\",\n] as const;\n\n/**\n * Patterns that are considered highly sensitive and should trigger encryption in hybrid mode.\n * These patterns contain data that, if exposed, could cause significant harm.\n */\nexport const HIGHLY_SENSITIVE_PATTERN_NAMES: readonly string[] = [\n  // Cryptographic keys - most critical\n  \"private_key\",\n\n  // Cloud provider credentials - can lead to infrastructure compromise\n  \"aws_access_key\",\n  \"aws_secret_key\",\n  \"azure_storage_key\",\n  \"google_api_key\",\n\n  // Financial and payment data - regulated and high-value\n  \"credit_card\",\n  \"stripe_key\",\n  \"paypal_client_id\",\n  \"square_token\",\n\n  // Personal identifiable information - privacy regulated\n  \"ssn\",\n\n  // Database credentials - can expose entire databases\n  \"mongodb_atlas\",\n  \"planetscale_password\",\n  \"supabase_key\",\n  \"db_connection\",\n\n  // AI service keys - expensive and potentially sensitive\n  \"openai_key\",\n  \"anthropic_key\",\n\n  // Authentication and identity services - security critical\n  \"auth0_secret\",\n  \"okta_token\",\n\n  // Generic high-value secrets\n  \"generic_secret\",\n\n  // Communication platform tokens with broad access\n  \"slack_token\",\n  \"discord_token\",\n\n  // Development platform tokens with code access\n  \"github_token\",\n  \"github_app_token\",\n  \"github_oauth_token\",\n  \"gitlab_token\",\n  \"bitbucket_token\",\n\n  // E-commerce platforms - business critical\n  \"shopify_token\",\n  \"shopify_secret\",\n\n  // Email services - can be used for phishing\n  \"sendgrid_key\",\n  \"mailgun_key\",\n\n  // Cloud infrastructure - can lead to service disruption\n  \"heroku_key\",\n  \"digitalocean_token\",\n  \"cloudflare_token\",\n  \"vercel_token\",\n  \"netlify_token\",\n  \"railway_token\",\n] as const;\n",
    "/**\n * Pattern categorization and filtering utilities.\n *\n * Provides functions to filter, group, and query sensitive data patterns\n * based on various criteria like name, category, sensitivity level, etc.\n */\n\nimport type { PatternCategory, SensitivePattern } from \"../types\";\nimport {\n  DEFAULT_PATTERN_NAMES,\n  HIGHLY_SENSITIVE_PATTERN_NAMES,\n  SENSITIVE_DATA_PATTERNS,\n} from \"./sensitive-patterns\";\n\n/**\n * Get all registered sensitive data patterns.\n */\nexport function getAllPatterns(): SensitivePattern[] {\n  return SENSITIVE_DATA_PATTERNS;\n}\n\n/**\n * Get patterns filtered by name array.\n * @param names - Array of pattern names to include\n * @returns Patterns matching the provided names\n */\nexport function getPatternsByNames(names: readonly string[]): SensitivePattern[] {\n  const nameSet = new Set(names);\n  return SENSITIVE_DATA_PATTERNS.filter((pattern) => nameSet.has(pattern.name));\n}\n\n/**\n * Get default patterns (non-aggressive mode).\n * These are the most critical patterns that should always be detected.\n */\nexport function getDefaultPatterns(): SensitivePattern[] {\n  return getPatternsByNames(DEFAULT_PATTERN_NAMES);\n}\n\n/**\n * Get all patterns including aggressive-only patterns.\n * Used when aggressive mode is enabled.\n */\nexport function getAllPatternsAggressive(): SensitivePattern[] {\n  return SENSITIVE_DATA_PATTERNS;\n}\n\n/**\n * Get patterns that are NOT aggressive-only (safe for default mode).\n */\nexport function getNonAggressivePatterns(): SensitivePattern[] {\n  return SENSITIVE_DATA_PATTERNS.filter((pattern) => !pattern.aggressiveOnly);\n}\n\n/**\n * Get highly sensitive patterns that should trigger encryption in hybrid mode.\n * These patterns contain data that, if exposed, could cause significant harm.\n */\nexport function getHighlySensitivePatterns(): SensitivePattern[] {\n  return getPatternsByNames(HIGHLY_SENSITIVE_PATTERN_NAMES);\n}\n\n/**\n * Check if a pattern name is considered highly sensitive.\n * @param patternName - The pattern name to check\n */\nexport function isHighlySensitivePattern(patternName: string): boolean {\n  return HIGHLY_SENSITIVE_PATTERN_NAMES.includes(patternName);\n}\n\n/**\n * Get patterns by category.\n * @param category - The pattern category to filter by\n */\nexport function getPatternsByCategory(category: PatternCategory): SensitivePattern[] {\n  return SENSITIVE_DATA_PATTERNS.filter((pattern) => pattern.category === category);\n}\n\n/**\n * Get all unique pattern categories.\n */\nexport function getAllCategories(): PatternCategory[] {\n  const categories = new Set<PatternCategory>();\n  for (const pattern of SENSITIVE_DATA_PATTERNS) {\n    categories.add(pattern.category);\n  }\n  return Array.from(categories);\n}\n\n/**\n * Get patterns grouped by category.\n * @returns Map of category to patterns in that category\n */\nexport function getPatternsByCategories(): Map<PatternCategory, SensitivePattern[]> {\n  const grouped = new Map<PatternCategory, SensitivePattern[]>();\n\n  for (const pattern of SENSITIVE_DATA_PATTERNS) {\n    const existing = grouped.get(pattern.category) ?? [];\n    existing.push(pattern);\n    grouped.set(pattern.category, existing);\n  }\n\n  return grouped;\n}\n\n/**\n * Get a single pattern by name.\n * @param name - The pattern name to find\n * @returns The pattern or undefined if not found\n */\nexport function getPatternByName(name: string): SensitivePattern | undefined {\n  return SENSITIVE_DATA_PATTERNS.find((pattern) => pattern.name === name);\n}\n\n/**\n * Get patterns sorted by priority (highest first).\n * Higher priority patterns should be preferred when there are overlapping matches.\n */\nexport function getPatternsSortedByPriority(): SensitivePattern[] {\n  return [...SENSITIVE_DATA_PATTERNS].sort((a, b) => b.priority - a.priority);\n}\n\n/**\n * Get pattern statistics.\n */\nexport function getPatternStats(): {\n  totalPatterns: number;\n  byCategory: Record<PatternCategory, number>;\n  defaultPatterns: number;\n  aggressiveOnlyPatterns: number;\n  highlySensitivePatterns: number;\n} {\n  const byCategory = {} as Record<PatternCategory, number>;\n\n  for (const pattern of SENSITIVE_DATA_PATTERNS) {\n    byCategory[pattern.category] = (byCategory[pattern.category] ?? 0) + 1;\n  }\n\n  return {\n    totalPatterns: SENSITIVE_DATA_PATTERNS.length,\n    byCategory,\n    defaultPatterns: DEFAULT_PATTERN_NAMES.length,\n    aggressiveOnlyPatterns: SENSITIVE_DATA_PATTERNS.filter((p) => p.aggressiveOnly).length,\n    highlySensitivePatterns: HIGHLY_SENSITIVE_PATTERN_NAMES.length,\n  };\n}\n\n/**\n * Select patterns based on privacy configuration.\n * @param aggressiveMode - Whether aggressive mode is enabled\n * @param enabledPatterns - Specific patterns to enable (empty = use defaults)\n */\nexport function selectPatterns(\n  aggressiveMode: boolean,\n  enabledPatterns: readonly string[],\n): SensitivePattern[] {\n  // If specific patterns are requested, use those\n  if (enabledPatterns.length > 0) {\n    return getPatternsByNames(enabledPatterns);\n  }\n\n  // Otherwise, use default or all patterns based on aggressive mode\n  if (aggressiveMode) {\n    return getAllPatterns();\n  }\n\n  return getNonAggressivePatterns();\n}\n\n/**\n * Get all pattern names.\n */\nexport function getAllPatternNames(): string[] {\n  return SENSITIVE_DATA_PATTERNS.map((p) => p.name);\n}\n\n/**\n * Get default pattern names.\n */\nexport function getDefaultPatternNames(): readonly string[] {\n  return DEFAULT_PATTERN_NAMES;\n}\n\n/**\n * Get highly sensitive pattern names.\n */\nexport function getHighlySensitivePatternNames(): readonly string[] {\n  return HIGHLY_SENSITIVE_PATTERN_NAMES;\n}\n",
    "/**\n * Core sensitive data detection engine.\n *\n * Platform-agnostic implementation that scans content for sensitive data patterns.\n * Does not depend on VS Code APIs or Node.js-specific modules.\n */\n\nimport { isHighlySensitivePattern, selectPatterns } from \"../patterns\";\nimport type {\n  Detection,\n  DetectionStats,\n  PatternCategory,\n  PrivacyConfig,\n  SensitivePattern,\n} from \"../types\";\nimport { DetectionCache, generateCacheKey } from \"./cache\";\n\n/**\n * Options for creating a SensitiveDataDetector.\n */\nexport interface DetectorOptions {\n  /** Privacy configuration */\n  config: PrivacyConfig;\n  /** Enable caching of scan results (default: true) */\n  enableCache?: boolean;\n  /** Maximum cache entries (default: 1000) */\n  maxCacheEntries?: number;\n  /** Cache TTL in milliseconds (default: 5 minutes) */\n  cacheTtlMs?: number;\n}\n\n/**\n * Result of scanning content for sensitive data.\n */\nexport interface ScanResult {\n  /** Whether any sensitive data was found */\n  hasSensitiveData: boolean;\n  /** List of detections */\n  detections: Detection[];\n  /** Whether result was served from cache */\n  fromCache: boolean;\n}\n\n/**\n * Core sensitive data detection engine.\n *\n * Scans content for sensitive data patterns and returns detection results.\n * Supports content hashing for deduplication and overlapping detection handling.\n *\n * @example\n * ```typescript\n * const detector = new SensitiveDataDetector({\n *   config: DEFAULT_PRIVACY_CONFIG,\n * });\n *\n * const result = detector.scanContent(\"API_KEY=sk-123456789\");\n * if (result.hasSensitiveData) {\n *   console.log(\"Found sensitive data:\", result.detections);\n * }\n * ```\n */\nexport class SensitiveDataDetector {\n  private patterns: SensitivePattern[];\n  private config: PrivacyConfig;\n  private cache: DetectionCache<ScanResult> | null;\n  private stats: DetectionStats;\n\n  constructor(options: DetectorOptions) {\n    this.config = options.config;\n    this.patterns = selectPatterns(options.config.aggressiveMode, options.config.enabledPatterns);\n\n    // Initialize cache if enabled\n    if (options.enableCache !== false) {\n      this.cache = new DetectionCache<ScanResult>({\n        maxEntries: options.maxCacheEntries ?? 1000,\n        ttlMs: options.cacheTtlMs ?? 5 * 60 * 1000,\n      });\n    } else {\n      this.cache = null;\n    }\n\n    // Initialize stats\n    this.stats = this.createEmptyStats();\n  }\n\n  /**\n   * Create empty detection stats.\n   */\n  private createEmptyStats(): DetectionStats {\n    return {\n      totalDetections: 0,\n      byPattern: {},\n      byCategory: {} as Record<PatternCategory, number>,\n      contentScanned: 0,\n      cacheHits: 0,\n    };\n  }\n\n  /**\n   * Update configuration and reload patterns.\n   */\n  updateConfig(newConfig: Partial<PrivacyConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    this.patterns = selectPatterns(this.config.aggressiveMode, this.config.enabledPatterns);\n    // Clear cache when config changes as results may be different\n    this.cache?.clear();\n  }\n\n  /**\n   * Get current configuration.\n   */\n  getConfig(): PrivacyConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Scan content for sensitive data.\n   *\n   * @param content - The text content to scan\n   * @param context - Optional context for cache key generation (e.g., file path)\n   * @returns Scan result with detections\n   */\n  scanContent(content: string, context?: string): ScanResult {\n    // Check cache first\n    if (this.cache) {\n      const cacheKey = generateCacheKey(content, context);\n      const cached = this.cache.get(cacheKey);\n      if (cached) {\n        this.stats.cacheHits++;\n        return { ...cached, fromCache: true };\n      }\n    }\n\n    // Perform the scan\n    const detections = this.performScan(content);\n\n    // Deduplicate overlapping detections\n    const deduplicatedDetections = this.deduplicateDetections(detections);\n\n    // Update stats\n    this.stats.contentScanned++;\n    this.stats.totalDetections += deduplicatedDetections.length;\n    for (const detection of deduplicatedDetections) {\n      this.stats.byPattern[detection.pattern] = (this.stats.byPattern[detection.pattern] || 0) + 1;\n      this.stats.byCategory[detection.category] =\n        (this.stats.byCategory[detection.category] || 0) + 1;\n    }\n\n    const result: ScanResult = {\n      hasSensitiveData: deduplicatedDetections.length > 0,\n      detections: deduplicatedDetections,\n      fromCache: false,\n    };\n\n    // Cache the result\n    if (this.cache) {\n      const cacheKey = generateCacheKey(content, context);\n      this.cache.set(cacheKey, result);\n    }\n\n    return result;\n  }\n\n  /**\n   * Perform the actual pattern matching scan.\n   */\n  private performScan(content: string): Detection[] {\n    const detections: Detection[] = [];\n\n    for (const pattern of this.patterns) {\n      // Reset regex lastIndex for global patterns\n      pattern.regex.lastIndex = 0;\n\n      const matches = Array.from(content.matchAll(pattern.regex));\n\n      for (const match of matches) {\n        if (match.index === undefined) continue;\n\n        // Calculate position - handle captured groups\n        let start = match.index;\n        let end = match.index + match[0].length;\n        let matchedText = match[0];\n\n        // If we have a captured group, use that as the actual sensitive value\n        if (match[1] !== undefined) {\n          const sensitiveValue = match[1];\n          const sensitiveStartInMatch = match[0].indexOf(sensitiveValue);\n\n          if (sensitiveStartInMatch !== -1) {\n            start = match.index + sensitiveStartInMatch;\n            end = start + sensitiveValue.length;\n            matchedText = sensitiveValue;\n          }\n        }\n\n        detections.push({\n          pattern: pattern.name,\n          description: pattern.description,\n          position: { start, end },\n          matchedText,\n          redactionStrategy: pattern.redactionStrategy,\n          category: pattern.category,\n          highlySensitive: pattern.highlySensitive,\n        });\n      }\n    }\n\n    return detections;\n  }\n\n  /**\n   * Deduplicate overlapping detections.\n   *\n   * When multiple patterns match the same or overlapping text, prefer:\n   * 1. Higher priority patterns\n   * 2. More specific patterns (e.g., aws_access_key over generic_secret)\n   * 3. Earlier matches for equal priority\n   */\n  private deduplicateDetections(detections: Detection[]): Detection[] {\n    if (detections.length <= 1) {\n      return detections;\n    }\n\n    // Sort by start position, then by priority (descending)\n    const sorted = [...detections].sort((a, b) => {\n      if (a.position.start !== b.position.start) {\n        return a.position.start - b.position.start;\n      }\n      // Higher priority wins when same start position\n      return this.getPatternPriority(b.pattern) - this.getPatternPriority(a.pattern);\n    });\n\n    const deduplicated: Detection[] = [];\n\n    for (const detection of sorted) {\n      // Find any overlapping detection already in results\n      const overlappingIndex = deduplicated.findIndex(\n        (existing) =>\n          detection.position.start < existing.position.end &&\n          detection.position.end > existing.position.start,\n      );\n\n      if (overlappingIndex === -1) {\n        // No overlap, add it\n        deduplicated.push(detection);\n      } else {\n        // Overlap exists - compare priorities\n        const existing = deduplicated[overlappingIndex];\n        const existingPriority = this.getPatternPriority(existing.pattern);\n        const newPriority = this.getPatternPriority(detection.pattern);\n\n        if (newPriority > existingPriority) {\n          // New detection has higher priority, replace\n          deduplicated[overlappingIndex] = detection;\n        }\n        // Otherwise keep existing (first match wins for equal priority)\n      }\n    }\n\n    return deduplicated;\n  }\n\n  /**\n   * Get the priority of a pattern by name.\n   */\n  private getPatternPriority(patternName: string): number {\n    const pattern = this.patterns.find((p) => p.name === patternName);\n    return pattern?.priority ?? 50;\n  }\n\n  /**\n   * Check if any detections contain highly sensitive data.\n   */\n  hasHighlySensitiveData(detections: Detection[]): boolean {\n    return detections.some((d) => d.highlySensitive || isHighlySensitivePattern(d.pattern));\n  }\n\n  /**\n   * Get detection statistics.\n   */\n  getStats(): DetectionStats {\n    return { ...this.stats };\n  }\n\n  /**\n   * Clear detection statistics.\n   */\n  clearStats(): void {\n    this.stats = this.createEmptyStats();\n  }\n\n  /**\n   * Clear the detection cache.\n   */\n  clearCache(): void {\n    this.cache?.clear();\n  }\n\n  /**\n   * Clear all data (stats and cache).\n   */\n  clearAll(): void {\n    this.clearStats();\n    this.clearCache();\n  }\n\n  /**\n   * Get the number of cached entries.\n   */\n  getCacheSize(): number {\n    return this.cache?.size ?? 0;\n  }\n\n  /**\n   * Get currently active patterns.\n   */\n  getActivePatterns(): SensitivePattern[] {\n    return [...this.patterns];\n  }\n\n  /**\n   * Get the number of active patterns.\n   */\n  getActivePatternCount(): number {\n    return this.patterns.length;\n  }\n}\n",
    "/**\n * Built-in file exclusion rules.\n *\n * These patterns are always applied regardless of user configuration.\n * They cover sensitive files, build artifacts, binary files, and lock files.\n */\n\nimport type { BuiltInExclusionRule, ExclusionCategory } from \"../types\";\n\n/**\n * Sensitive file patterns - credentials, keys, secrets.\n */\nexport const SENSITIVE_FILE_RULES: BuiltInExclusionRule[] = [\n  { pattern: \"*.env*\", category: \"sensitive_files\", description: \"Environment files\" },\n  { pattern: \"*.key\", category: \"sensitive_files\", description: \"Key files\" },\n  { pattern: \"*.pem\", category: \"sensitive_files\", description: \"PEM certificate files\" },\n  { pattern: \"*.p12\", category: \"sensitive_files\", description: \"PKCS#12 files\" },\n  { pattern: \"*.pfx\", category: \"sensitive_files\", description: \"PFX certificate files\" },\n  { pattern: \"*.jks\", category: \"sensitive_files\", description: \"Java keystore files\" },\n  { pattern: \"*.keystore\", category: \"sensitive_files\", description: \"Keystore files\" },\n];\n\n/**\n * Sensitive directory patterns.\n */\nexport const SENSITIVE_DIRECTORY_RULES: BuiltInExclusionRule[] = [\n  { pattern: \"**/secrets/**\", category: \"sensitive_directories\", description: \"Secrets directory\" },\n  {\n    pattern: \"**/credentials/**\",\n    category: \"sensitive_directories\",\n    description: \"Credentials directory\",\n  },\n  { pattern: \"**/private/**\", category: \"sensitive_directories\", description: \"Private directory\" },\n  { pattern: \"**/.ssh/**\", category: \"sensitive_directories\", description: \"SSH directory\" },\n  { pattern: \"**/.aws/**\", category: \"sensitive_directories\", description: \"AWS credentials\" },\n  { pattern: \"**/.gcp/**\", category: \"sensitive_directories\", description: \"GCP credentials\" },\n];\n\n/**\n * Build artifact patterns.\n */\nexport const BUILD_ARTIFACT_RULES: BuiltInExclusionRule[] = [\n  { pattern: \"**/node_modules/**\", category: \"build_artifacts\", description: \"Node.js modules\" },\n  { pattern: \"**/.git/**\", category: \"build_artifacts\", description: \"Git directory\" },\n  { pattern: \"**/dist/**\", category: \"build_artifacts\", description: \"Distribution folder\" },\n  { pattern: \"**/build/**\", category: \"build_artifacts\", description: \"Build folder\" },\n  { pattern: \"**/out/**\", category: \"build_artifacts\", description: \"Output folder\" },\n  { pattern: \"**/*.min.js\", category: \"build_artifacts\", description: \"Minified JavaScript\" },\n  { pattern: \"**/*.min.css\", category: \"build_artifacts\", description: \"Minified CSS\" },\n  { pattern: \"**/coverage/**\", category: \"build_artifacts\", description: \"Coverage reports\" },\n  { pattern: \"**/.nyc_output/**\", category: \"build_artifacts\", description: \"NYC coverage output\" },\n  { pattern: \"**/logs/**\", category: \"build_artifacts\", description: \"Log directory\" },\n  { pattern: \"**/*.log\", category: \"build_artifacts\", description: \"Log files\" },\n  { pattern: \"**/tmp/**\", category: \"build_artifacts\", description: \"Temp directory\" },\n  { pattern: \"**/temp/**\", category: \"build_artifacts\", description: \"Temp directory\" },\n  { pattern: \"**/.cache/**\", category: \"build_artifacts\", description: \"Cache directory\" },\n  { pattern: \"**/.DS_Store\", category: \"build_artifacts\", description: \"macOS metadata\" },\n  { pattern: \"**/Thumbs.db\", category: \"build_artifacts\", description: \"Windows thumbnails\" },\n];\n\n/**\n * Lock file patterns - auto-generated, large files.\n */\nexport const LOCK_FILE_RULES: BuiltInExclusionRule[] = [\n  // Node.js\n  { pattern: \"**/package-lock.json\", category: \"lock_files\", description: \"npm lock file\" },\n  { pattern: \"**/yarn.lock\", category: \"lock_files\", description: \"Yarn lock file\" },\n  { pattern: \"**/pnpm-lock.yaml\", category: \"lock_files\", description: \"pnpm lock file\" },\n  { pattern: \"**/bun.lockb\", category: \"lock_files\", description: \"Bun lock file (binary)\" },\n  { pattern: \"**/bun.lock\", category: \"lock_files\", description: \"Bun lock file\" },\n  // Python\n  { pattern: \"**/poetry.lock\", category: \"lock_files\", description: \"Poetry lock file\" },\n  { pattern: \"**/Pipfile.lock\", category: \"lock_files\", description: \"Pipenv lock file\" },\n  { pattern: \"**/requirements.lock\", category: \"lock_files\", description: \"Requirements lock\" },\n  // Ruby\n  { pattern: \"**/Gemfile.lock\", category: \"lock_files\", description: \"Bundler lock file\" },\n  // PHP\n  { pattern: \"**/composer.lock\", category: \"lock_files\", description: \"Composer lock file\" },\n  // Rust\n  { pattern: \"**/Cargo.lock\", category: \"lock_files\", description: \"Cargo lock file\" },\n  // Go\n  { pattern: \"**/go.sum\", category: \"lock_files\", description: \"Go checksum file\" },\n  // .NET\n  { pattern: \"**/packages.lock.json\", category: \"lock_files\", description: \".NET lock file\" },\n  { pattern: \"**/project.assets.json\", category: \"lock_files\", description: \".NET assets\" },\n  // Dart/Flutter\n  { pattern: \"**/pubspec.lock\", category: \"lock_files\", description: \"Pub lock file\" },\n  // Elixir\n  { pattern: \"**/mix.lock\", category: \"lock_files\", description: \"Mix lock file\" },\n  // Swift\n  { pattern: \"**/Package.resolved\", category: \"lock_files\", description: \"Swift PM lock\" },\n  // Java\n  { pattern: \"**/gradle.lockfile\", category: \"lock_files\", description: \"Gradle lock file\" },\n  { pattern: \"**/gradle/dependencies.lock\", category: \"lock_files\", description: \"Gradle deps\" },\n  // R\n  { pattern: \"**/renv.lock\", category: \"lock_files\", description: \"renv lock file\" },\n  { pattern: \"**/packrat/packrat.lock\", category: \"lock_files\", description: \"Packrat lock\" },\n  // Haskell\n  { pattern: \"**/cabal.project.freeze\", category: \"lock_files\", description: \"Cabal freeze\" },\n  { pattern: \"**/stack.yaml.lock\", category: \"lock_files\", description: \"Stack lock file\" },\n  // Julia\n  { pattern: \"**/Manifest.toml\", category: \"lock_files\", description: \"Julia manifest\" },\n  // Terraform\n  { pattern: \"**/.terraform.lock.hcl\", category: \"lock_files\", description: \"Terraform lock\" },\n  // Nix\n  { pattern: \"**/flake.lock\", category: \"lock_files\", description: \"Nix flake lock\" },\n  // Misc\n  { pattern: \"**/npm-shrinkwrap.json\", category: \"lock_files\", description: \"npm shrinkwrap\" },\n];\n\n/**\n * Binary and media file patterns.\n */\nexport const BINARY_MEDIA_RULES: BuiltInExclusionRule[] = [\n  // Executables and libraries\n  { pattern: \"**/*.exe\", category: \"binary_media\", description: \"Windows executable\" },\n  { pattern: \"**/*.dll\", category: \"binary_media\", description: \"Windows library\" },\n  { pattern: \"**/*.so\", category: \"binary_media\", description: \"Shared object\" },\n  { pattern: \"**/*.dylib\", category: \"binary_media\", description: \"macOS library\" },\n  { pattern: \"**/*.bin\", category: \"binary_media\", description: \"Binary file\" },\n  { pattern: \"**/*.obj\", category: \"binary_media\", description: \"Object file\" },\n  { pattern: \"**/*.o\", category: \"binary_media\", description: \"Object file\" },\n  { pattern: \"**/*.a\", category: \"binary_media\", description: \"Static library\" },\n  { pattern: \"**/*.lib\", category: \"binary_media\", description: \"Library file\" },\n  { pattern: \"**/*.jar\", category: \"binary_media\", description: \"Java archive\" },\n  { pattern: \"**/*.war\", category: \"binary_media\", description: \"Web archive\" },\n  { pattern: \"**/*.ear\", category: \"binary_media\", description: \"Enterprise archive\" },\n  { pattern: \"**/*.class\", category: \"binary_media\", description: \"Java class\" },\n  { pattern: \"**/*.pyc\", category: \"binary_media\", description: \"Python bytecode\" },\n  { pattern: \"**/*.pyo\", category: \"binary_media\", description: \"Python optimized\" },\n  { pattern: \"**/*.wasm\", category: \"binary_media\", description: \"WebAssembly\" },\n  { pattern: \"**/*.vsix\", category: \"binary_media\", description: \"VS Code extension\" },\n  // Images\n  { pattern: \"**/*.jpg\", category: \"binary_media\", description: \"JPEG image\" },\n  { pattern: \"**/*.jpeg\", category: \"binary_media\", description: \"JPEG image\" },\n  { pattern: \"**/*.png\", category: \"binary_media\", description: \"PNG image\" },\n  { pattern: \"**/*.gif\", category: \"binary_media\", description: \"GIF image\" },\n  { pattern: \"**/*.bmp\", category: \"binary_media\", description: \"Bitmap image\" },\n  { pattern: \"**/*.ico\", category: \"binary_media\", description: \"Icon file\" },\n  { pattern: \"**/*.webp\", category: \"binary_media\", description: \"WebP image\" },\n  { pattern: \"**/*.tiff\", category: \"binary_media\", description: \"TIFF image\" },\n  { pattern: \"**/*.psd\", category: \"binary_media\", description: \"Photoshop file\" },\n  // Videos\n  { pattern: \"**/*.mp4\", category: \"binary_media\", description: \"MP4 video\" },\n  { pattern: \"**/*.avi\", category: \"binary_media\", description: \"AVI video\" },\n  { pattern: \"**/*.mov\", category: \"binary_media\", description: \"QuickTime video\" },\n  { pattern: \"**/*.wmv\", category: \"binary_media\", description: \"WMV video\" },\n  { pattern: \"**/*.flv\", category: \"binary_media\", description: \"Flash video\" },\n  { pattern: \"**/*.webm\", category: \"binary_media\", description: \"WebM video\" },\n  { pattern: \"**/*.mkv\", category: \"binary_media\", description: \"Matroska video\" },\n  // Audio\n  { pattern: \"**/*.mp3\", category: \"binary_media\", description: \"MP3 audio\" },\n  { pattern: \"**/*.wav\", category: \"binary_media\", description: \"WAV audio\" },\n  { pattern: \"**/*.ogg\", category: \"binary_media\", description: \"Ogg audio\" },\n  { pattern: \"**/*.flac\", category: \"binary_media\", description: \"FLAC audio\" },\n  { pattern: \"**/*.aac\", category: \"binary_media\", description: \"AAC audio\" },\n  { pattern: \"**/*.m4a\", category: \"binary_media\", description: \"M4A audio\" },\n  // Archives\n  { pattern: \"**/*.zip\", category: \"binary_media\", description: \"ZIP archive\" },\n  { pattern: \"**/*.tar\", category: \"binary_media\", description: \"TAR archive\" },\n  { pattern: \"**/*.gz\", category: \"binary_media\", description: \"Gzip archive\" },\n  { pattern: \"**/*.bz2\", category: \"binary_media\", description: \"Bzip2 archive\" },\n  { pattern: \"**/*.xz\", category: \"binary_media\", description: \"XZ archive\" },\n  { pattern: \"**/*.rar\", category: \"binary_media\", description: \"RAR archive\" },\n  { pattern: \"**/*.7z\", category: \"binary_media\", description: \"7-Zip archive\" },\n  { pattern: \"**/*.tgz\", category: \"binary_media\", description: \"Tarball\" },\n  // Documents\n  { pattern: \"**/*.pdf\", category: \"binary_media\", description: \"PDF document\" },\n  { pattern: \"**/*.doc\", category: \"binary_media\", description: \"Word document\" },\n  { pattern: \"**/*.docx\", category: \"binary_media\", description: \"Word document\" },\n  { pattern: \"**/*.xls\", category: \"binary_media\", description: \"Excel spreadsheet\" },\n  { pattern: \"**/*.xlsx\", category: \"binary_media\", description: \"Excel spreadsheet\" },\n  { pattern: \"**/*.ppt\", category: \"binary_media\", description: \"PowerPoint\" },\n  { pattern: \"**/*.pptx\", category: \"binary_media\", description: \"PowerPoint\" },\n  // Fonts\n  { pattern: \"**/*.woff\", category: \"binary_media\", description: \"WOFF font\" },\n  { pattern: \"**/*.woff2\", category: \"binary_media\", description: \"WOFF2 font\" },\n  { pattern: \"**/*.ttf\", category: \"binary_media\", description: \"TrueType font\" },\n  { pattern: \"**/*.otf\", category: \"binary_media\", description: \"OpenType font\" },\n  { pattern: \"**/*.eot\", category: \"binary_media\", description: \"EOT font\" },\n  // Database\n  { pattern: \"**/*.db\", category: \"binary_media\", description: \"Database file\" },\n  { pattern: \"**/*.sqlite\", category: \"binary_media\", description: \"SQLite database\" },\n  { pattern: \"**/*.sqlite3\", category: \"binary_media\", description: \"SQLite database\" },\n];\n\n/**\n * All built-in exclusion rules combined.\n */\nexport const ALL_BUILT_IN_RULES: BuiltInExclusionRule[] = [\n  ...SENSITIVE_FILE_RULES,\n  ...SENSITIVE_DIRECTORY_RULES,\n  ...BUILD_ARTIFACT_RULES,\n  ...LOCK_FILE_RULES,\n  ...BINARY_MEDIA_RULES,\n];\n\n/**\n * Get all built-in patterns as a Set for fast lookup.\n */\nexport function getBuiltInPatterns(): Set<string> {\n  return new Set(ALL_BUILT_IN_RULES.map((rule) => rule.pattern));\n}\n\n/**\n * Get built-in rules by category.\n */\nexport function getBuiltInRulesByCategory(category: ExclusionCategory): BuiltInExclusionRule[] {\n  return ALL_BUILT_IN_RULES.filter((rule) => rule.category === category);\n}\n\n/**\n * Find the rule that matches a pattern.\n */\nexport function findBuiltInRule(pattern: string): BuiltInExclusionRule | undefined {\n  return ALL_BUILT_IN_RULES.find((rule) => rule.pattern === pattern);\n}\n\n/**\n * Get statistics about built-in rules.\n */\nexport function getBuiltInRuleStats(): Record<ExclusionCategory, number> {\n  const stats: Record<ExclusionCategory, number> = {\n    sensitive_files: 0,\n    sensitive_directories: 0,\n    build_artifacts: 0,\n    lock_files: 0,\n    binary_media: 0,\n  };\n\n  for (const rule of ALL_BUILT_IN_RULES) {\n    stats[rule.category]++;\n  }\n\n  return stats;\n}\n",
    "/**\n * Glob pattern matching utilities.\n *\n * Provides platform-agnostic glob pattern matching for file exclusion.\n * Supports standard glob patterns including **, *, and ?.\n */\n\n/**\n * Normalize path separators to forward slashes.\n * This ensures consistent matching across platforms.\n */\nexport function normalizePath(filePath: string): string {\n  return filePath.replace(/\\\\/g, \"/\");\n}\n\n/**\n * Convert a glob pattern to a regular expression.\n *\n * Supports:\n * - `**` - matches any path segments (including none)\n * - `*` - matches anything except path separators\n * - `?` - matches single character except path separators\n * - Character classes like `[abc]`\n *\n * @param pattern - Glob pattern to convert\n * @returns Compiled regular expression\n */\nexport function globToRegex(pattern: string): RegExp {\n  // Normalize the pattern\n  let normalized = normalizePath(pattern);\n\n  // Escape regex special characters except glob wildcards\n  let regexPattern = normalized\n    .replace(/[.+^${}()|[\\]\\\\]/g, \"\\\\$&\")\n    // Use placeholders for glob patterns\n    .replace(/\\*\\*/g, \"DOUBLESTAR\")\n    .replace(/\\*/g, \"[^/]*\") // Single * matches anything except /\n    .replace(/\\?/g, \"[^/]\"); // ? matches single char except /\n\n  // Handle ** patterns\n  regexPattern = regexPattern\n    .replace(/DOUBLESTAR\\//g, \"(?:.*/)?\") // **/ matches any dirs including none\n    .replace(/\\/DOUBLESTAR/g, \"(?:/.*)?\") // /** matches any dirs including none\n    .replace(/DOUBLESTAR/g, \".*\"); // ** alone matches anything\n\n  return new RegExp(`^${regexPattern}$`, \"i\");\n}\n\n/**\n * Check if a file path matches a glob pattern.\n *\n * @param filePath - File path to test (absolute or relative)\n * @param pattern - Glob pattern to match against\n * @param workspaceRoot - Optional workspace root to also test relative paths\n * @returns True if the path matches the pattern\n *\n * @example\n * ```typescript\n * matchesGlob(\"/project/src/index.ts\", \"**\\/*.ts\") // true\n * matchesGlob(\"/project/.env.local\", \"*.env*\") // true\n * matchesGlob(\"/project/node_modules/pkg/index.js\", \"**\\/node_modules\\/**\") // true\n * matchesGlob(\"/project/out/file.js\", \"out/**\", \"/project\") // true (relative match)\n * ```\n */\nexport function matchesGlob(\n  filePath: string,\n  pattern: string,\n  workspaceRoot?: string,\n): boolean {\n  const normalizedPath = normalizePath(filePath);\n  const regex = globToRegex(pattern);\n\n  // Test the full path\n  if (regex.test(normalizedPath)) {\n    return true;\n  }\n\n  // Also test the filename alone for simple patterns like \"*.env*\"\n  if (!pattern.includes(\"/\")) {\n    const fileName = normalizedPath.split(\"/\").pop() || \"\";\n    if (regex.test(fileName)) {\n      return true;\n    }\n  }\n\n  // If workspace root provided, also test relative path\n  // This allows patterns like \"out/**\" to match absolute paths\n  if (workspaceRoot) {\n    const normalizedRoot = normalizePath(workspaceRoot);\n    if (normalizedPath.startsWith(normalizedRoot)) {\n      let relativePath = normalizedPath.substring(normalizedRoot.length);\n      if (relativePath.startsWith(\"/\")) {\n        relativePath = relativePath.substring(1);\n      }\n      if (regex.test(relativePath)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * Check if a path matches against the pattern, considering a base directory.\n *\n * This is useful for gitignore patterns that are relative to the gitignore location.\n *\n * @param filePath - Absolute file path\n * @param pattern - Glob pattern\n * @param baseDir - Base directory to resolve relative paths from\n * @returns True if the path matches\n */\nexport function matchesGlobRelative(\n  filePath: string,\n  pattern: string,\n  baseDir: string,\n): boolean {\n  const normalizedPath = normalizePath(filePath);\n  const normalizedBase = normalizePath(baseDir);\n\n  // Check if file is under the base directory\n  if (!normalizedPath.startsWith(normalizedBase)) {\n    return false;\n  }\n\n  // Get relative path from base\n  let relativePath = normalizedPath.substring(normalizedBase.length);\n  if (relativePath.startsWith(\"/\")) {\n    relativePath = relativePath.substring(1);\n  }\n\n  // Test against the pattern\n  return matchesGlob(relativePath, pattern);\n}\n\n/**\n * Find the first matching pattern from a set of patterns.\n *\n * @param filePath - File path to test\n * @param patterns - Set or array of patterns to test against\n * @param workspaceRoot - Optional workspace root for relative path matching\n * @returns The matching pattern, or null if none match\n */\nexport function findMatchingPattern(\n  filePath: string,\n  patterns: Set<string> | string[],\n  workspaceRoot?: string,\n): string | null {\n  for (const pattern of patterns) {\n    if (matchesGlob(filePath, pattern, workspaceRoot)) {\n      return pattern;\n    }\n  }\n  return null;\n}\n\n/**\n * Find the first matching pattern with base directory context.\n *\n * @param filePath - Absolute file path\n * @param patternMap - Map of patterns to their base directories\n * @returns Object with pattern and baseDir, or null if no match\n */\nexport function findMatchingPatternWithBase(\n  filePath: string,\n  patternMap: Map<string, string>,\n): { pattern: string; baseDir: string } | null {\n  for (const [pattern, baseDir] of patternMap) {\n    if (matchesGlobRelative(filePath, pattern, baseDir)) {\n      return { pattern, baseDir };\n    }\n  }\n  return null;\n}\n\n/**\n * Check if a path is under a given directory.\n */\nexport function isPathUnder(filePath: string, directory: string): boolean {\n  const normalizedPath = normalizePath(filePath);\n  const normalizedDir = normalizePath(directory);\n\n  // Ensure directory ends with /\n  const dirWithSlash = normalizedDir.endsWith(\"/\") ? normalizedDir : `${normalizedDir}/`;\n\n  return normalizedPath.startsWith(dirWithSlash) || normalizedPath === normalizedDir;\n}\n\n/**\n * Get relative path from a base directory.\n */\nexport function getRelativePath(filePath: string, baseDir: string): string {\n  const normalizedPath = normalizePath(filePath);\n  const normalizedBase = normalizePath(baseDir);\n\n  if (!normalizedPath.startsWith(normalizedBase)) {\n    return normalizedPath;\n  }\n\n  let relative = normalizedPath.substring(normalizedBase.length);\n  if (relative.startsWith(\"/\")) {\n    relative = relative.substring(1);\n  }\n\n  return relative;\n}\n",
    "/**\n * Gitignore file parser.\n *\n * Parses .gitignore files and converts patterns to glob format\n * suitable for the glob matcher.\n */\n\n/**\n * Parsed gitignore pattern with metadata.\n */\nexport interface GitignorePattern {\n  /** The original pattern from the file */\n  original: string;\n  /** Normalized glob pattern for matching */\n  glob: string;\n  /** Whether this is a negation pattern (starts with !) */\n  negated: boolean;\n  /** Whether this pattern only matches directories */\n  directoryOnly: boolean;\n}\n\n/**\n * Parse a single gitignore line into a pattern object.\n *\n * Handles:\n * - Comments (lines starting with #)\n * - Negation patterns (starting with !)\n * - Directory-only patterns (ending with /)\n * - Rooted patterns (starting with /)\n * - Various gitignore syntax quirks\n *\n * @param line - Single line from a gitignore file\n * @returns Parsed pattern or null for empty/comment lines\n */\nexport function parseGitignoreLine(line: string): GitignorePattern | null {\n  // Trim whitespace\n  let pattern = line.trim();\n\n  // Skip empty lines and comments\n  if (!pattern || pattern.startsWith(\"#\")) {\n    return null;\n  }\n\n  // Handle trailing spaces (escaped with backslash)\n  pattern = pattern.replace(/\\\\(\\s)$/, \"$1\");\n\n  // Check for negation\n  const negated = pattern.startsWith(\"!\");\n  if (negated) {\n    pattern = pattern.substring(1);\n  }\n\n  // Check for directory-only pattern\n  const directoryOnly = pattern.endsWith(\"/\");\n  if (directoryOnly) {\n    pattern = pattern.slice(0, -1);\n  }\n\n  // Store original for reference\n  const original = line.trim();\n\n  // Convert to glob pattern\n  let glob = pattern;\n\n  // Handle rooted patterns (starting with /)\n  if (glob.startsWith(\"/\")) {\n    glob = glob.substring(1);\n  } else if (!glob.includes(\"/\")) {\n    // Pattern without / matches in any directory\n    glob = `**/${glob}`;\n  }\n\n  // Handle directory-only patterns\n  if (directoryOnly) {\n    glob = `${glob}/**`;\n  }\n\n  return {\n    original,\n    glob,\n    negated,\n    directoryOnly,\n  };\n}\n\n/**\n * Parse a complete gitignore file content.\n *\n * @param content - Full content of a gitignore file\n * @returns Array of parsed patterns (excluding comments and empty lines)\n */\nexport function parseGitignoreContent(content: string): GitignorePattern[] {\n  const lines = content.split(\"\\n\");\n  const patterns: GitignorePattern[] = [];\n\n  for (const line of lines) {\n    const parsed = parseGitignoreLine(line);\n    if (parsed) {\n      patterns.push(parsed);\n    }\n  }\n\n  return patterns;\n}\n\n/**\n * Extract just the glob patterns from gitignore content.\n *\n * This is a simpler interface that returns only the glob patterns\n * without metadata. Negation patterns are excluded.\n *\n * @param content - Full content of a gitignore file\n * @returns Array of glob patterns (strings)\n */\nexport function extractGlobPatterns(content: string): string[] {\n  const parsed = parseGitignoreContent(content);\n\n  // Filter out negation patterns and return just the globs\n  return parsed.filter((p) => !p.negated).map((p) => p.glob);\n}\n\n/**\n * Result of loading a gitignore file.\n */\nexport interface GitignoreLoadResult {\n  /** Path to the gitignore file */\n  filePath: string;\n  /** Directory containing the gitignore (patterns are relative to this) */\n  directory: string;\n  /** Parsed patterns */\n  patterns: GitignorePattern[];\n  /** Just the glob patterns (no metadata) */\n  globs: string[];\n}\n\n/**\n * Create a GitignoreLoadResult from file content.\n *\n * @param filePath - Path to the gitignore file\n * @param content - Content of the file\n * @returns Structured result with parsed patterns\n */\nexport function createGitignoreResult(\n  filePath: string,\n  content: string,\n): GitignoreLoadResult {\n  // Get directory by removing the filename\n  const directory = filePath.replace(/[/\\\\][^/\\\\]*$/, \"\");\n\n  const patterns = parseGitignoreContent(content);\n  const globs = patterns.filter((p) => !p.negated).map((p) => p.glob);\n\n  return {\n    filePath,\n    directory,\n    patterns,\n    globs,\n  };\n}\n\n/**\n * Merge multiple gitignore results into a pattern map.\n *\n * Returns a Map where keys are glob patterns and values are the directories\n * they apply to. This allows proper scoping of gitignore patterns.\n *\n * @param results - Array of gitignore load results\n * @returns Map of pattern -> directory\n */\nexport function mergeGitignorePatterns(\n  results: GitignoreLoadResult[],\n): Map<string, string> {\n  const patternMap = new Map<string, string>();\n\n  for (const result of results) {\n    for (const glob of result.globs) {\n      // Each pattern is associated with its gitignore's directory\n      patternMap.set(glob, result.directory);\n    }\n  }\n\n  return patternMap;\n}\n",
    "/**\n * Zest rules file parser.\n *\n * Parses .zest.rules files which use the same syntax as .gitignore\n * but are specifically for Zest privacy exclusions.\n *\n * .zest.rules files allow users to define additional file exclusion\n * patterns beyond what's in .gitignore, specifically for Zest telemetry.\n */\n\nimport {\n  type GitignoreLoadResult,\n  type GitignorePattern,\n  parseGitignoreContent,\n} from \"./gitignore-parser\";\n\n/**\n * The filename for Zest rules files.\n */\nexport const ZEST_RULES_FILENAME = \".zest.rules\";\n\n/**\n * Result of loading a .zest.rules file.\n */\nexport interface ZestRulesLoadResult {\n  /** Path to the .zest.rules file */\n  filePath: string;\n  /** Directory containing the file */\n  directory: string;\n  /** Parsed patterns */\n  patterns: GitignorePattern[];\n  /** Just the glob patterns (no metadata) */\n  globs: string[];\n}\n\n/**\n * Parse .zest.rules file content.\n *\n * Uses the same syntax as .gitignore files.\n *\n * @param content - Content of the .zest.rules file\n * @returns Array of parsed patterns\n */\nexport function parseZestRulesContent(content: string): GitignorePattern[] {\n  // Zest rules use the same syntax as gitignore\n  return parseGitignoreContent(content);\n}\n\n/**\n * Extract glob patterns from .zest.rules content.\n *\n * @param content - Content of the .zest.rules file\n * @returns Array of glob patterns (strings)\n */\nexport function extractZestRulesPatterns(content: string): string[] {\n  const parsed = parseZestRulesContent(content);\n  return parsed.filter((p) => !p.negated).map((p) => p.glob);\n}\n\n/**\n * Create a ZestRulesLoadResult from file content.\n *\n * @param filePath - Path to the .zest.rules file\n * @param content - Content of the file\n * @returns Structured result with parsed patterns\n */\nexport function createZestRulesResult(\n  filePath: string,\n  content: string,\n): ZestRulesLoadResult {\n  // Get directory by removing the filename\n  const directory = filePath.replace(/[/\\\\][^/\\\\]*$/, \"\");\n\n  const patterns = parseZestRulesContent(content);\n  const globs = patterns.filter((p) => !p.negated).map((p) => p.glob);\n\n  return {\n    filePath,\n    directory,\n    patterns,\n    globs,\n  };\n}\n\n/**\n * Merge multiple .zest.rules results into a single pattern set.\n *\n * Unlike gitignore, .zest.rules patterns are applied globally\n * regardless of which directory they're in.\n *\n * @param results - Array of .zest.rules load results\n * @returns Set of all unique glob patterns\n */\nexport function mergeZestRulesPatterns(results: ZestRulesLoadResult[]): Set<string> {\n  const patterns = new Set<string>();\n\n  for (const result of results) {\n    for (const glob of result.globs) {\n      patterns.add(glob);\n    }\n  }\n\n  return patterns;\n}\n\n/**\n * Generate example .zest.rules content.\n *\n * Useful for documentation or creating default files.\n */\nexport function generateExampleZestRules(): string {\n  return `# Zest Privacy Rules\n# This file uses the same syntax as .gitignore\n# Patterns here will exclude files from Zest telemetry\n\n# Exclude sensitive configuration\nconfig/secrets.json\n**/api-keys.json\n\n# Exclude test fixtures with sensitive data\n**/fixtures/credentials/**\n**/test-data/users.json\n\n# Exclude specific environment files\n.env.production\n.env.staging\n\n# Exclude internal tools\ninternal/\ntools/private/\n`;\n}\n",
    "/**\n * File Exclusion Service.\n *\n * Platform-agnostic service for determining which files should be excluded\n * from telemetry based on .gitignore patterns, .zest.rules, and built-in rules.\n */\n\nimport type {\n  ExcludedFile,\n  ExclusionReason,\n  ExclusionResult,\n  FileSystemAdapter,\n  PrivacyConfig,\n} from \"../types\";\nimport { getBuiltInPatterns } from \"./built-in-rules\";\nimport {\n  findMatchingPattern,\n  findMatchingPatternWithBase,\n  matchesGlob,\n} from \"./glob-matcher\";\nimport {\n  createGitignoreResult,\n  type GitignoreLoadResult,\n  mergeGitignorePatterns,\n} from \"./gitignore-parser\";\nimport {\n  createZestRulesResult,\n  mergeZestRulesPatterns,\n  ZEST_RULES_FILENAME,\n  type ZestRulesLoadResult,\n} from \"./zest-rules-parser\";\n\n/**\n * Options for creating a FileExclusionService.\n */\nexport interface FileExclusionServiceOptions {\n  /** Privacy configuration */\n  config: PrivacyConfig;\n  /** File system adapter for reading files */\n  fs: FileSystemAdapter;\n}\n\n/**\n * Statistics about file exclusions.\n */\nexport interface ExclusionStats {\n  /** Total files excluded */\n  totalExcluded: number;\n  /** Exclusions by reason */\n  byReason: Record<ExclusionReason, number>;\n  /** Number of gitignore patterns loaded */\n  gitignorePatternCount: number;\n  /** Number of zest rules patterns loaded */\n  zestRulesPatternCount: number;\n  /** Number of built-in patterns */\n  builtInPatternCount: number;\n}\n\n/**\n * Service for determining file exclusions.\n *\n * This service loads exclusion patterns from multiple sources:\n * - Built-in rules (always applied)\n * - .gitignore files (if enabled in config)\n * - .zest.rules files (if enabled in config)\n * - Custom patterns from config\n *\n * @example\n * ```typescript\n * const service = new FileExclusionService({\n *   config: DEFAULT_PRIVACY_CONFIG,\n *   fs: nodeFileSystemAdapter,\n * });\n *\n * await service.initialize();\n *\n * const result = await service.shouldExcludeFile(\"/project/.env\");\n * if (result.excluded) {\n *   console.log(\"Excluded:\", result.reason, result.matchedRule);\n * }\n * ```\n */\nexport class FileExclusionService {\n  private config: PrivacyConfig;\n  private fs: FileSystemAdapter;\n\n  // Pattern storage\n  private builtInPatterns: Set<string>;\n  private gitignorePatterns: Map<string, string>; // pattern -> directory\n  private zestRulesPatterns: Set<string>;\n  private customPatterns: Set<string>;\n\n  // Tracking\n  private excludedFiles: Map<string, ExcludedFile>;\n  private initialized: boolean;\n\n  constructor(options: FileExclusionServiceOptions) {\n    this.config = options.config;\n    this.fs = options.fs;\n\n    // Initialize pattern sets\n    this.builtInPatterns = getBuiltInPatterns();\n    this.gitignorePatterns = new Map();\n    this.zestRulesPatterns = new Set();\n    this.customPatterns = new Set(options.config.customExclusionPatterns);\n\n    // Tracking\n    this.excludedFiles = new Map();\n    this.initialized = false;\n  }\n\n  /**\n   * Initialize the service by loading all exclusion patterns.\n   *\n   * This should be called before using the service. It loads patterns\n   * from .gitignore and .zest.rules files in the workspace.\n   */\n  async initialize(): Promise<void> {\n    await this.refreshPatterns();\n    this.initialized = true;\n  }\n\n  /**\n   * Refresh all patterns from disk.\n   *\n   * Call this when files change or when config is updated.\n   */\n  async refreshPatterns(): Promise<void> {\n    // Load gitignore patterns if enabled\n    if (this.config.enableGitignore) {\n      await this.loadGitignorePatterns();\n    } else {\n      this.gitignorePatterns.clear();\n    }\n\n    // Load zest rules patterns if enabled\n    if (this.config.enableZestRules) {\n      await this.loadZestRulesPatterns();\n    } else {\n      this.zestRulesPatterns.clear();\n    }\n\n    // Update custom patterns from config\n    this.customPatterns = new Set(this.config.customExclusionPatterns);\n\n    // Clear cached exclusions\n    this.excludedFiles.clear();\n  }\n\n  /**\n   * Load .gitignore patterns from workspace.\n   */\n  private async loadGitignorePatterns(): Promise<void> {\n    this.gitignorePatterns.clear();\n\n    const workspaceRoot = this.fs.getWorkspaceRoot();\n    if (!workspaceRoot) return;\n\n    const results: GitignoreLoadResult[] = [];\n\n    // Load .gitignore from workspace root\n    const rootGitignore = `${workspaceRoot}/.gitignore`;\n    try {\n      if (await this.fs.fileExists(rootGitignore)) {\n        const content = await this.fs.readFile(rootGitignore);\n        results.push(createGitignoreResult(rootGitignore, content));\n      }\n    } catch {\n      // Ignore errors reading gitignore\n    }\n\n    // Merge all patterns\n    this.gitignorePatterns = mergeGitignorePatterns(results);\n  }\n\n  /**\n   * Load .zest.rules patterns from workspace.\n   */\n  private async loadZestRulesPatterns(): Promise<void> {\n    this.zestRulesPatterns.clear();\n\n    const workspaceRoot = this.fs.getWorkspaceRoot();\n    if (!workspaceRoot) return;\n\n    const results: ZestRulesLoadResult[] = [];\n\n    // Load .zest.rules from workspace root\n    const rootZestRules = `${workspaceRoot}/${ZEST_RULES_FILENAME}`;\n    try {\n      if (await this.fs.fileExists(rootZestRules)) {\n        const content = await this.fs.readFile(rootZestRules);\n        results.push(createZestRulesResult(rootZestRules, content));\n      }\n    } catch {\n      // Ignore errors reading zest rules\n    }\n\n    // Merge all patterns\n    this.zestRulesPatterns = mergeZestRulesPatterns(results);\n  }\n\n  /**\n   * Update configuration and reload patterns.\n   */\n  async updateConfig(newConfig: Partial<PrivacyConfig>): Promise<void> {\n    this.config = { ...this.config, ...newConfig };\n    await this.refreshPatterns();\n  }\n\n  /**\n   * Get current configuration.\n   */\n  getConfig(): PrivacyConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Check if a file should be excluded from telemetry.\n   *\n   * @param filePath - Absolute path to the file\n   * @returns Exclusion result with reason and matched rule\n   */\n  shouldExcludeFile(filePath: string): ExclusionResult {\n    // Check built-in patterns first (always applied, with workspace root for relative path matching)\n    const workspaceRoot = this.fs.getWorkspaceRoot();\n    const builtInMatch = findMatchingPattern(filePath, this.builtInPatterns, workspaceRoot);\n    if (builtInMatch) {\n      const result: ExclusionResult = {\n        excluded: true,\n        reason: \"built_in_rule\",\n        matchedRule: builtInMatch,\n      };\n      this.trackExclusion(filePath, result);\n      return result;\n    }\n\n    // Check gitignore patterns (if enabled)\n    if (this.config.enableGitignore && this.gitignorePatterns.size > 0) {\n      const gitignoreMatch = findMatchingPatternWithBase(filePath, this.gitignorePatterns);\n      if (gitignoreMatch) {\n        const result: ExclusionResult = {\n          excluded: true,\n          reason: \"gitignore\",\n          matchedRule: gitignoreMatch.pattern,\n        };\n        this.trackExclusion(filePath, result);\n        return result;\n      }\n    }\n\n    // Check zest rules patterns (if enabled, with workspace root for relative path matching)\n    if (this.config.enableZestRules && this.zestRulesPatterns.size > 0) {\n      const zestMatch = findMatchingPattern(filePath, this.zestRulesPatterns, workspaceRoot);\n      if (zestMatch) {\n        const result: ExclusionResult = {\n          excluded: true,\n          reason: \"zest_rules\",\n          matchedRule: zestMatch,\n        };\n        this.trackExclusion(filePath, result);\n        return result;\n      }\n    }\n\n    // Check custom patterns (with workspace root for relative path matching)\n    if (this.customPatterns.size > 0) {\n      const customMatch = findMatchingPattern(filePath, this.customPatterns, workspaceRoot);\n      if (customMatch) {\n        const result: ExclusionResult = {\n          excluded: true,\n          reason: \"custom_pattern\",\n          matchedRule: customMatch,\n        };\n        this.trackExclusion(filePath, result);\n        return result;\n      }\n    }\n\n    // Not excluded\n    return { excluded: false };\n  }\n\n  /**\n   * Check if a file should be excluded based on size.\n   *\n   * @param fileSizeBytes - Size of the file in bytes\n   * @returns True if the file exceeds the size limit\n   */\n  isFileTooLarge(fileSizeBytes: number): boolean {\n    return fileSizeBytes > this.config.maxFileSizeBytes;\n  }\n\n  /**\n   * Check if a file appears to be binary based on extension.\n   *\n   * @param filePath - Path to the file\n   * @returns True if the file appears to be binary\n   */\n  isBinaryFile(filePath: string): boolean {\n    // Use built-in binary patterns to check\n    const binaryExtensions = [\n      \".exe\", \".dll\", \".so\", \".dylib\", \".bin\", \".obj\", \".o\",\n      \".a\", \".lib\", \".jar\", \".war\", \".class\", \".pyc\", \".wasm\",\n      \".jpg\", \".jpeg\", \".png\", \".gif\", \".bmp\", \".ico\", \".webp\",\n      \".mp4\", \".avi\", \".mov\", \".wmv\", \".mkv\", \".mp3\", \".wav\",\n      \".zip\", \".tar\", \".gz\", \".rar\", \".7z\", \".pdf\",\n      \".woff\", \".woff2\", \".ttf\", \".otf\", \".eot\",\n      \".db\", \".sqlite\", \".sqlite3\",\n    ];\n\n    const lowerPath = filePath.toLowerCase();\n    return binaryExtensions.some((ext) => lowerPath.endsWith(ext));\n  }\n\n  /**\n   * Track an exclusion for statistics.\n   */\n  private trackExclusion(filePath: string, result: ExclusionResult): void {\n    if (result.excluded && result.reason && result.matchedRule) {\n      this.excludedFiles.set(filePath, {\n        filePath,\n        reason: result.reason,\n        matchedRule: result.matchedRule,\n      });\n    }\n  }\n\n  /**\n   * Get all tracked excluded files.\n   */\n  getExcludedFiles(): ExcludedFile[] {\n    return Array.from(this.excludedFiles.values());\n  }\n\n  /**\n   * Get exclusion statistics.\n   */\n  getStats(): ExclusionStats {\n    const byReason: Record<ExclusionReason, number> = {\n      built_in_rule: 0,\n      gitignore: 0,\n      zest_rules: 0,\n      custom_pattern: 0,\n      file_size: 0,\n      binary_file: 0,\n    };\n\n    for (const excluded of this.excludedFiles.values()) {\n      byReason[excluded.reason]++;\n    }\n\n    return {\n      totalExcluded: this.excludedFiles.size,\n      byReason,\n      gitignorePatternCount: this.gitignorePatterns.size,\n      zestRulesPatternCount: this.zestRulesPatterns.size,\n      builtInPatternCount: this.builtInPatterns.size,\n    };\n  }\n\n  /**\n   * Clear tracked exclusions.\n   */\n  clearExclusions(): void {\n    this.excludedFiles.clear();\n  }\n\n  /**\n   * Clear exclusion for a specific file.\n   */\n  clearExclusionForFile(filePath: string): void {\n    this.excludedFiles.delete(filePath);\n  }\n\n  /**\n   * Check if the service is initialized.\n   */\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n\n  /**\n   * Get count of patterns by source.\n   */\n  getPatternCounts(): {\n    builtIn: number;\n    gitignore: number;\n    zestRules: number;\n    custom: number;\n    total: number;\n  } {\n    const counts = {\n      builtIn: this.builtInPatterns.size,\n      gitignore: this.gitignorePatterns.size,\n      zestRules: this.zestRulesPatterns.size,\n      custom: this.customPatterns.size,\n      total: 0,\n    };\n    counts.total = counts.builtIn + counts.gitignore + counts.zestRules + counts.custom;\n    return counts;\n  }\n}\n",
    "/**\n * Redaction strategy implementations.\n *\n * Provides pure functions for different redaction approaches:\n * - Full redaction: Replace with [REDACTED]\n * - Partial redaction: Show first/last 20%, mask middle\n * - Hash redaction: Replace with [HASH:xxxx]\n * - Encrypt redaction: Replace with [ENCRYPTED:xxxx]\n *\n * All functions are pure and platform-agnostic.\n */\n\nimport type { RedactionStrategy } from \"../types\";\n\n/**\n * Compute a simple non-cryptographic hash for content identification.\n * Used for hash redaction strategy.\n *\n * @param text - Text to hash\n * @returns 8-character hexadecimal hash\n */\nexport function simpleHash(text: string): string {\n  let hash = 0;\n  for (let i = 0; i < text.length; i++) {\n    const char = text.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  return Math.abs(hash).toString(16).padStart(8, \"0\").substring(0, 8);\n}\n\n/**\n * Full redaction - replace entire text with [REDACTED].\n *\n * @param _text - Text to redact (unused, replaced entirely)\n * @returns \"[REDACTED]\"\n *\n * @example\n * ```typescript\n * fullRedact(\"sk-1234567890abcdef\") // \"[REDACTED]\"\n * ```\n */\nexport function fullRedact(_text: string): string {\n  return \"[REDACTED]\";\n}\n\n/**\n * Partial redaction - show first and last 20% of text, mask the middle.\n *\n * For short strings (<=8 chars), falls back to full redaction.\n * Middle is replaced with asterisks, capped at 8 characters.\n *\n * @param text - Text to partially redact\n * @returns Partially redacted text with visible ends\n *\n * @example\n * ```typescript\n * partialRedact(\"sk-1234567890abcdef\")\n * // \"sk-1********cdef\"\n *\n * partialRedact(\"short\")\n * // \"[REDACTED]\" (too short for partial)\n * ```\n */\nexport function partialRedact(text: string): string {\n  if (text.length <= 8) {\n    return \"[REDACTED]\";\n  }\n\n  const visibleChars = Math.max(2, Math.floor(text.length * 0.2));\n  const start = text.substring(0, visibleChars);\n  const end = text.substring(text.length - visibleChars);\n  const middleLength = text.length - 2 * visibleChars;\n\n  // Cap the middle asterisks at 8 for readability\n  return `${start}${\"*\".repeat(Math.min(middleLength, 8))}${end}`;\n}\n\n/**\n * Hash redaction - replace with a hash identifier.\n *\n * Useful when you need to identify recurring values without exposing them.\n *\n * @param text - Text to hash-redact\n * @returns \"[HASH:xxxxxxxx]\" where xxxxxxxx is an 8-char hex hash\n *\n * @example\n * ```typescript\n * hashRedact(\"sk-1234567890\")\n * // \"[HASH:a1b2c3d4]\"\n * ```\n */\nexport function hashRedact(text: string): string {\n  return `[HASH:${simpleHash(text)}]`;\n}\n\n/**\n * Encrypt redaction - replace with encrypted marker and hash.\n *\n * Note: This is a simplified implementation using hashing rather than\n * actual encryption. Production usage should integrate with proper\n * cryptographic key management.\n *\n * The format includes a preview of the encrypted output and a content hash\n * for identification purposes.\n *\n * @param text - Text to encrypt-redact\n * @returns \"[ENCRYPTED:xxxx...yyyy]\" format\n *\n * @example\n * ```typescript\n * encryptRedact(\"secret-api-key\")\n * // \"[ENCRYPTED:a1b2c3d4...e5f6g7h8]\"\n * ```\n */\nexport function encryptRedact(text: string): string {\n  // Create a content hash for identification\n  const contentHash = simpleHash(text);\n\n  // Create a secondary hash for the \"encrypted\" portion\n  // In production, this would use actual AES-256 encryption\n  const encryptedHash = simpleHash(text + \"salt\");\n\n  return `[ENCRYPTED:${encryptedHash}...${contentHash}]`;\n}\n\n/**\n * Apply the specified redaction strategy to text.\n *\n * @param text - Text to redact\n * @param strategy - Redaction strategy to apply\n * @returns Redacted text\n *\n * @example\n * ```typescript\n * applyRedactionStrategy(\"sk-123456\", \"full\")    // \"[REDACTED]\"\n * applyRedactionStrategy(\"sk-123456\", \"partial\") // \"sk********56\"\n * applyRedactionStrategy(\"sk-123456\", \"hash\")    // \"[HASH:a1b2c3d4]\"\n * applyRedactionStrategy(\"sk-123456\", \"encrypt\") // \"[ENCRYPTED:...]\"\n * ```\n */\nexport function applyRedactionStrategy(text: string, strategy: RedactionStrategy): string {\n  switch (strategy) {\n    case \"full\":\n      return fullRedact(text);\n    case \"partial\":\n      return partialRedact(text);\n    case \"hash\":\n      return hashRedact(text);\n    case \"encrypt\":\n      return encryptRedact(text);\n    default:\n      // Default to full redaction for unknown strategies\n      return fullRedact(text);\n  }\n}\n\n/**\n * Strategy metadata for UI/documentation purposes.\n */\nexport interface RedactionStrategyInfo {\n  /** Strategy identifier */\n  name: RedactionStrategy;\n  /** Human-readable label */\n  label: string;\n  /** Description of how this strategy works */\n  description: string;\n  /** Whether this strategy is reversible */\n  reversible: boolean;\n  /** Whether this strategy preserves format/length hints */\n  preservesFormat: boolean;\n}\n\n/**\n * Information about all available redaction strategies.\n */\nexport const REDACTION_STRATEGIES: RedactionStrategyInfo[] = [\n  {\n    name: \"full\",\n    label: \"Full Redaction\",\n    description: \"Replace sensitive data entirely with [REDACTED]\",\n    reversible: false,\n    preservesFormat: false,\n  },\n  {\n    name: \"partial\",\n    label: \"Partial Redaction\",\n    description: \"Show first and last 20% of text, mask the middle with asterisks\",\n    reversible: false,\n    preservesFormat: true,\n  },\n  {\n    name: \"hash\",\n    label: \"Hash Redaction\",\n    description: \"Replace with a hash identifier for tracking recurring values\",\n    reversible: false,\n    preservesFormat: false,\n  },\n  {\n    name: \"encrypt\",\n    label: \"Encrypted Redaction\",\n    description: \"Replace with encrypted marker (requires key management for recovery)\",\n    reversible: true,\n    preservesFormat: false,\n  },\n];\n\n/**\n * Get strategy info by name.\n */\nexport function getStrategyInfo(strategy: RedactionStrategy): RedactionStrategyInfo | undefined {\n  return REDACTION_STRATEGIES.find((s) => s.name === strategy);\n}\n",
    "/**\n * Main redaction orchestrator.\n *\n * Combines detection results with redaction strategies to produce\n * redacted content with comprehensive metadata.\n */\n\nimport { isHighlySensitivePattern } from \"../patterns\";\nimport type {\n  Detection,\n  PrivacyApproach,\n  PrivacyConfig,\n  RedactionResult,\n  RedactionStrategy,\n} from \"../types\";\nimport { applyRedactionStrategy, encryptRedact } from \"./strategies\";\n\n/**\n * Options for content redaction.\n */\nexport interface RedactContentOptions {\n  /** Privacy approach to use (detection, encryption, or hybrid) */\n  approach?: PrivacyApproach;\n  /** Override encryption for highly sensitive data in hybrid mode */\n  encryptHighlySensitive?: boolean;\n}\n\n/**\n * Redact sensitive data from content based on detections.\n *\n * This is the main redaction function that applies the appropriate\n * redaction strategy to each detection, handling position offsets\n * correctly by processing detections in reverse order.\n *\n * @param content - Original content with sensitive data\n * @param detections - Array of detections to redact\n * @param config - Privacy configuration\n * @param options - Additional redaction options\n * @returns Redaction result with redacted content and metadata\n *\n * @example\n * ```typescript\n * const result = redactContent(\n *   \"API_KEY=sk-1234567890abcdef\",\n *   [{ pattern: \"generic_api_key\", ... }],\n *   { approach: \"detection\", ... }\n * );\n * // result.redactedContent = \"API_KEY=[REDACTED]\"\n * ```\n */\nexport function redactContent(\n  content: string,\n  detections: Detection[],\n  config: PrivacyConfig,\n  options: RedactContentOptions = {},\n): RedactionResult {\n  const approach = options.approach ?? config.approach;\n  const encryptHighlySensitive = options.encryptHighlySensitive ?? true;\n\n  // No detections = no redaction needed\n  if (detections.length === 0) {\n    return {\n      redactedContent: content,\n      detections: [],\n      stats: {\n        totalDetections: 0,\n        byPattern: {},\n      },\n      wasRedacted: false,\n    };\n  }\n\n  // Sort detections by position (descending) to avoid offset issues during replacement\n  const sortedDetections = [...detections].sort(\n    (a, b) => b.position.start - a.position.start,\n  );\n\n  let redactedContent = content;\n  const patternCounts: Record<string, number> = {};\n\n  for (const detection of sortedDetections) {\n    // Get the original text at the detection position\n    const originalText = content.substring(detection.position.start, detection.position.end);\n\n    // Determine the appropriate redaction strategy\n    const strategy = determineStrategy(detection, approach, encryptHighlySensitive);\n\n    // Apply the redaction\n    const redactedText = applyRedactionStrategy(originalText, strategy);\n\n    // Replace in content\n    redactedContent =\n      redactedContent.substring(0, detection.position.start) +\n      redactedText +\n      redactedContent.substring(detection.position.end);\n\n    // Track pattern counts\n    patternCounts[detection.pattern] = (patternCounts[detection.pattern] || 0) + 1;\n  }\n\n  return {\n    redactedContent,\n    detections,\n    stats: {\n      totalDetections: detections.length,\n      byPattern: patternCounts,\n    },\n    wasRedacted: true,\n  };\n}\n\n/**\n * Determine the redaction strategy for a detection based on privacy approach.\n *\n * @param detection - The detection to get strategy for\n * @param approach - The privacy approach being used\n * @param encryptHighlySensitive - Whether to encrypt highly sensitive data\n * @returns The redaction strategy to apply\n */\nfunction determineStrategy(\n  detection: Detection,\n  approach: PrivacyApproach,\n  encryptHighlySensitive: boolean,\n): RedactionStrategy {\n  switch (approach) {\n    case \"encryption\":\n      // Encrypt everything\n      return \"encrypt\";\n\n    case \"hybrid\":\n      // Encrypt highly sensitive, use pattern default for others\n      if (encryptHighlySensitive && isHighlySensitive(detection)) {\n        return \"encrypt\";\n      }\n      return detection.redactionStrategy;\n\n    case \"detection\":\n    default:\n      // Use the pattern's default strategy\n      return detection.redactionStrategy;\n  }\n}\n\n/**\n * Check if a detection is highly sensitive (warrants encryption).\n */\nfunction isHighlySensitive(detection: Detection): boolean {\n  return detection.highlySensitive || isHighlySensitivePattern(detection.pattern);\n}\n\n/**\n * Create a redaction summary from pattern counts.\n *\n * @param patternCounts - Map of pattern names to detection counts\n * @param patternDescriptions - Optional map of pattern names to descriptions\n * @returns Human-readable summary strings\n *\n * @example\n * ```typescript\n * createRedactionSummary({ \"aws_access_key\": 2, \"generic_api_key\": 1 })\n * // [\"2 aws_access_keys\", \"1 generic_api_key\"]\n * ```\n */\nexport function createRedactionSummary(\n  patternCounts: Record<string, number>,\n  patternDescriptions?: Record<string, string>,\n): string[] {\n  const summary: string[] = [];\n\n  for (const [pattern, count] of Object.entries(patternCounts)) {\n    const description = patternDescriptions?.[pattern] ?? pattern;\n    const pluralized = count > 1 ? `${description}s` : description;\n    summary.push(`${count} ${pluralized}`);\n  }\n\n  return summary;\n}\n\n/**\n * Batch redact multiple content strings.\n *\n * Useful when processing multiple files or chunks of content.\n *\n * @param items - Array of content/detection pairs\n * @param config - Privacy configuration\n * @param options - Additional redaction options\n * @returns Array of redaction results\n */\nexport function batchRedact(\n  items: Array<{ content: string; detections: Detection[] }>,\n  config: PrivacyConfig,\n  options: RedactContentOptions = {},\n): RedactionResult[] {\n  return items.map((item) => redactContent(item.content, item.detections, config, options));\n}\n\n/**\n * Quick redaction helper that applies full redaction to all detections.\n *\n * @param content - Content to redact\n * @param detections - Detections to apply\n * @returns Redacted content string (no metadata)\n */\nexport function quickRedact(content: string, detections: Detection[]): string {\n  if (detections.length === 0) return content;\n\n  const sortedDetections = [...detections].sort(\n    (a, b) => b.position.start - a.position.start,\n  );\n\n  let result = content;\n  for (const detection of sortedDetections) {\n    result =\n      result.substring(0, detection.position.start) +\n      \"[REDACTED]\" +\n      result.substring(detection.position.end);\n  }\n\n  return result;\n}\n\n/**\n * Apply custom redaction function to detections.\n *\n * Allows callers to provide their own redaction logic.\n *\n * @param content - Content to redact\n * @param detections - Detections to process\n * @param redactFn - Custom function that takes matched text and returns replacement\n * @returns Redacted content string\n */\nexport function customRedact(\n  content: string,\n  detections: Detection[],\n  redactFn: (matchedText: string, detection: Detection) => string,\n): string {\n  if (detections.length === 0) return content;\n\n  const sortedDetections = [...detections].sort(\n    (a, b) => b.position.start - a.position.start,\n  );\n\n  let result = content;\n  for (const detection of sortedDetections) {\n    const originalText = content.substring(detection.position.start, detection.position.end);\n    const replacement = redactFn(originalText, detection);\n    result =\n      result.substring(0, detection.position.start) +\n      replacement +\n      result.substring(detection.position.end);\n  }\n\n  return result;\n}\n",
    "/**\n * Privacy Service Facade.\n *\n * Unified API that combines detection, redaction, and file exclusion\n * into a single entry point for privacy operations.\n */\n\nimport { createPrivacyConfig } from \"./config/defaults\";\nimport { type DetectorOptions, SensitiveDataDetector } from \"./detection\";\nimport { FileExclusionService, type FileExclusionServiceOptions } from \"./exclusion\";\nimport { type RedactContentOptions, redactContent } from \"./redaction\";\nimport type {\n  Detection,\n  ExcludedFile,\n  ExclusionResult,\n  FileSystemAdapter,\n  PrivacyConfig,\n  PrivacyStats,\n  ProcessResult,\n} from \"./types\";\n\n/**\n * Options for creating a PrivacyService.\n */\nexport interface PrivacyServiceOptions {\n  /** Privacy configuration (uses defaults if not provided) */\n  config?: Partial<PrivacyConfig>;\n  /** File system adapter for exclusion service */\n  fs: FileSystemAdapter;\n  /** Enable detection caching (default: true) */\n  enableCache?: boolean;\n  /** Maximum cache entries (default: 1000) */\n  maxCacheEntries?: number;\n  /** Cache TTL in milliseconds (default: 5 minutes) */\n  cacheTtlMs?: number;\n}\n\n/**\n * Privacy Service - unified facade for all privacy operations.\n *\n * This service provides a single entry point for:\n * - Processing content (detection + redaction)\n * - File exclusion checks\n * - Configuration management\n * - Statistics tracking\n *\n * @example\n * ```typescript\n * const privacyService = new PrivacyService({\n *   fs: nodeFileSystemAdapter,\n *   config: { approach: \"detection\" },\n * });\n *\n * await privacyService.initialize();\n *\n * // Process content\n * const result = await privacyService.processContent(\n *   \"API_KEY=sk-123456789\",\n *   \"/path/to/file.ts\"\n * );\n *\n * if (result.hasSensitiveData) {\n *   console.log(\"Redacted:\", result.content);\n * }\n *\n * // Check file exclusion\n * const excluded = await privacyService.shouldExcludeFile(\"/path/to/.env\");\n * ```\n */\nexport class PrivacyService {\n  private config: PrivacyConfig;\n  private detector: SensitiveDataDetector;\n  private exclusionService: FileExclusionService;\n  private filesProcessed: number;\n\n  constructor(options: PrivacyServiceOptions) {\n    // Create full config from partial\n    this.config = createPrivacyConfig(options.config);\n\n    // Initialize detector\n    const detectorOptions: DetectorOptions = {\n      config: this.config,\n      enableCache: options.enableCache ?? true,\n      maxCacheEntries: options.maxCacheEntries,\n      cacheTtlMs: options.cacheTtlMs,\n    };\n    this.detector = new SensitiveDataDetector(detectorOptions);\n\n    // Initialize exclusion service\n    const exclusionOptions: FileExclusionServiceOptions = {\n      config: this.config,\n      fs: options.fs,\n    };\n    this.exclusionService = new FileExclusionService(exclusionOptions);\n\n    // Initialize counters\n    this.filesProcessed = 0;\n  }\n\n  /**\n   * Initialize the privacy service.\n   *\n   * This loads exclusion patterns from .gitignore and .zest.rules files.\n   * Should be called before processing content or checking file exclusions.\n   */\n  async initialize(): Promise<void> {\n    await this.exclusionService.initialize();\n  }\n\n  /**\n   * Check if the service is initialized.\n   */\n  isInitialized(): boolean {\n    return this.exclusionService.isInitialized();\n  }\n\n  /**\n   * Process content for sensitive data detection and redaction.\n   *\n   * This is the main entry point for privacy processing:\n   * 1. Optionally checks file exclusion (if filePath provided)\n   * 2. Scans content for sensitive data patterns\n   * 3. Applies appropriate redaction strategy\n   *\n   * @param content - The text content to process\n   * @param filePath - Optional file path for context and exclusion check\n   * @param options - Additional redaction options\n   * @returns Processing result with redacted content and metadata\n   */\n  processContent(\n    content: string,\n    filePath?: string,\n    options?: RedactContentOptions,\n  ): ProcessResult {\n    // Scan for sensitive data\n    const scanResult = this.detector.scanContent(content, filePath);\n\n    // If no sensitive data found, return original content\n    if (!scanResult.hasSensitiveData) {\n      this.filesProcessed++;\n      return {\n        content,\n        detections: [],\n        hasSensitiveData: false,\n        wasRedacted: false,\n      };\n    }\n\n    // Apply redaction\n    const redactionResult = redactContent(content, scanResult.detections, this.config, options);\n\n    this.filesProcessed++;\n\n    return {\n      content: redactionResult.redactedContent,\n      detections: redactionResult.detections,\n      hasSensitiveData: true,\n      wasRedacted: redactionResult.wasRedacted,\n    };\n  }\n\n  /**\n   * Process content only if the file is not excluded.\n   *\n   * Convenience method that combines exclusion check with content processing.\n   *\n   * @param content - The text content to process\n   * @param filePath - File path for exclusion check and context\n   * @param options - Additional redaction options\n   * @returns Processing result, or null if file is excluded\n   */\n  processContentIfNotExcluded(\n    content: string,\n    filePath: string,\n    options?: RedactContentOptions,\n  ): ProcessResult | null {\n    const exclusion = this.shouldExcludeFile(filePath);\n    if (exclusion.excluded) {\n      return null;\n    }\n\n    return this.processContent(content, filePath, options);\n  }\n\n  /**\n   * Scan content for sensitive data without redacting.\n   *\n   * Use this when you only need to detect sensitive data without modifying content.\n   *\n   * @param content - The text content to scan\n   * @param context - Optional context for cache key generation\n   * @returns Array of detections found\n   */\n  scanContent(content: string, context?: string): Detection[] {\n    const result = this.detector.scanContent(content, context);\n    return result.detections;\n  }\n\n  /**\n   * Check if content contains sensitive data.\n   *\n   * @param content - The text content to check\n   * @returns True if sensitive data was detected\n   */\n  hasSensitiveData(content: string): boolean {\n    const result = this.detector.scanContent(content);\n    return result.hasSensitiveData;\n  }\n\n  /**\n   * Check if content contains highly sensitive data (encryption-worthy).\n   *\n   * @param content - The text content to check\n   * @returns True if highly sensitive data was detected\n   */\n  hasHighlySensitiveData(content: string): boolean {\n    const result = this.detector.scanContent(content);\n    if (!result.hasSensitiveData) return false;\n    return this.detector.hasHighlySensitiveData(result.detections);\n  }\n\n  /**\n   * Check if a file should be excluded from telemetry.\n   *\n   * @param filePath - Absolute path to the file\n   * @returns Exclusion result with reason and matched rule\n   */\n  shouldExcludeFile(filePath: string): ExclusionResult {\n    return this.exclusionService.shouldExcludeFile(filePath);\n  }\n\n  /**\n   * Check if a file should be excluded based on size.\n   *\n   * @param fileSizeBytes - Size of the file in bytes\n   * @returns True if the file exceeds the size limit\n   */\n  isFileTooLarge(fileSizeBytes: number): boolean {\n    return this.exclusionService.isFileTooLarge(fileSizeBytes);\n  }\n\n  /**\n   * Check if a file appears to be binary based on extension.\n   *\n   * @param filePath - Path to the file\n   * @returns True if the file appears to be binary\n   */\n  isBinaryFile(filePath: string): boolean {\n    return this.exclusionService.isBinaryFile(filePath);\n  }\n\n  /**\n   * Update privacy configuration.\n   *\n   * Updates both the detector and exclusion service with new settings.\n   * Clears caches as results may differ with new config.\n   *\n   * @param partial - Partial configuration to merge with current config\n   */\n  async updateConfig(partial: Partial<PrivacyConfig>): Promise<void> {\n    this.config = { ...this.config, ...partial };\n    this.detector.updateConfig(partial);\n    await this.exclusionService.updateConfig(partial);\n  }\n\n  /**\n   * Get current privacy configuration.\n   */\n  getConfig(): PrivacyConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Get comprehensive privacy statistics.\n   */\n  getStats(): PrivacyStats {\n    const detectionStats = this.detector.getStats();\n    const exclusionStats = this.exclusionService.getStats();\n\n    return {\n      detection: detectionStats,\n      filesExcluded: exclusionStats.totalExcluded,\n      filesProcessed: this.filesProcessed,\n    };\n  }\n\n  /**\n   * Get all tracked excluded files.\n   */\n  getExcludedFiles(): ExcludedFile[] {\n    return this.exclusionService.getExcludedFiles();\n  }\n\n  /**\n   * Clear all cached data and statistics.\n   *\n   * Use this when starting a new session or when configuration changes significantly.\n   */\n  clearAll(): void {\n    this.detector.clearAll();\n    this.exclusionService.clearExclusions();\n    this.filesProcessed = 0;\n  }\n\n  /**\n   * Clear detection cache only.\n   */\n  clearCache(): void {\n    this.detector.clearCache();\n  }\n\n  /**\n   * Clear detection statistics only.\n   */\n  clearStats(): void {\n    this.detector.clearStats();\n    this.filesProcessed = 0;\n  }\n\n  /**\n   * Clear file exclusion tracking only.\n   */\n  clearExclusions(): void {\n    this.exclusionService.clearExclusions();\n  }\n\n  /**\n   * Refresh exclusion patterns from disk.\n   *\n   * Call this when .gitignore or .zest.rules files change.\n   */\n  async refreshExclusionPatterns(): Promise<void> {\n    await this.exclusionService.refreshPatterns();\n  }\n\n  /**\n   * Get the number of active sensitive data patterns.\n   */\n  getActivePatternCount(): number {\n    return this.detector.getActivePatternCount();\n  }\n\n  /**\n   * Get pattern counts from the exclusion service.\n   */\n  getExclusionPatternCounts(): {\n    builtIn: number;\n    gitignore: number;\n    zestRules: number;\n    custom: number;\n    total: number;\n  } {\n    return this.exclusionService.getPatternCounts();\n  }\n\n  /**\n   * Get cache size from the detector.\n   */\n  getCacheSize(): number {\n    return this.detector.getCacheSize();\n  }\n}\n",
    "/**\r\n * Logging utilities\r\n *\r\n * Handles logging to console and file system with daily log rotation.\r\n * Log files are named with dates (e.g., plugin-2026-01-09.log) and\r\n * automatically cleaned up after LOG_RETENTION_DAYS.\r\n */\r\n\r\nimport { appendFile } from \"node:fs/promises\";\r\nimport { dirname } from \"node:path\";\r\nimport { ensureDirectory } from \"./fs-utils.js\";\r\nimport { cleanupStaleLogs, getDatedLogPath } from \"./log-rotation.js\";\r\n\r\ntype LogLevel = \"debug\" | \"info\" | \"warn\" | \"error\";\r\n\r\nclass Logger {\r\n  private minLevel: LogLevel = \"info\";\r\n  private readonly logPrefix: string;\r\n\r\n  private levels: Record<LogLevel, number> = {\r\n    debug: 0,\r\n    info: 1,\r\n    warn: 2,\r\n    error: 3,\r\n  };\r\n\r\n  constructor(logPrefix = \"plugin\") {\r\n    this.logPrefix = logPrefix;\r\n  }\r\n\r\n  setLevel(level: LogLevel): void {\r\n    this.minLevel = level;\r\n  }\r\n\r\n  private async writeToFile(message: string): Promise<void> {\r\n    try {\r\n      // Get date-based log path (handles date rollover automatically)\r\n      const logFilePath = getDatedLogPath(this.logPrefix);\r\n      await ensureDirectory(dirname(logFilePath));\r\n      const timestamp = new Date().toISOString();\r\n      await appendFile(logFilePath, `[${timestamp}] ${message}\\n`, \"utf-8\");\r\n\r\n      // Trigger cleanup (throttled to once per hour)\r\n      cleanupStaleLogs(this.logPrefix);\r\n    } catch (error) {\r\n      // Silently fail - don't crash if we can't write logs\r\n      console.error(\"Failed to write to log file:\", error);\r\n    }\r\n  }\r\n\r\n  private shouldLog(level: LogLevel): boolean {\r\n    return this.levels[level] >= this.levels[this.minLevel];\r\n  }\r\n\r\n  debug(message: string, ...args: unknown[]): void {\r\n    if (this.shouldLog(\"debug\")) {\r\n      // Only write to file, don't clutter console\r\n      this.writeToFile(`DEBUG: ${message} ${args.length > 0 ? JSON.stringify(args) : \"\"}`);\r\n    }\r\n  }\r\n\r\n  info(message: string, ...args: unknown[]): void {\r\n    if (this.shouldLog(\"info\")) {\r\n      // Only write to file, don't clutter console\r\n      this.writeToFile(`INFO: ${message} ${args.length > 0 ? JSON.stringify(args) : \"\"}`);\r\n    }\r\n  }\r\n\r\n  warn(message: string, ...args: unknown[]): void {\r\n    if (this.shouldLog(\"warn\")) {\r\n      // Show warnings to user\r\n      console.warn(`[Zest:Warn] ${message}`, ...args);\r\n      this.writeToFile(`WARN: ${message} ${args.length > 0 ? JSON.stringify(args) : \"\"}`);\r\n    }\r\n  }\r\n\r\n  error(message: string, error?: unknown): void {\r\n    if (this.shouldLog(\"error\")) {\r\n      // Show errors to user\r\n      console.error(`[Zest:Error] ${message}`, error);\r\n      this.writeToFile(\r\n        `ERROR: ${message} ${error instanceof Error ? error.stack : JSON.stringify(error)}`,\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport const logger = new Logger();\r\n",
    "/**\r\n * Filesystem utility functions\r\n *\r\n * Shared helpers for file and directory operations\r\n *\r\n * Note: This module intentionally has no dependencies on logger.ts\r\n * to avoid circular dependencies (logger.ts uses ensureDirectory).\r\n */\r\n\r\nimport { mkdir, stat } from \"node:fs/promises\";\r\n\r\n/**\r\n * Ensure directory exists, creating it if necessary\r\n * Creates parent directories recursively with secure permissions (mode 0o700)\r\n *\r\n * @param dirPath - Path to the directory to ensure exists\r\n */\r\nexport async function ensureDirectory(dirPath: string): Promise<void> {\r\n  try {\r\n    await stat(dirPath);\r\n  } catch {\r\n    await mkdir(dirPath, { recursive: true, mode: 0o700 });\r\n  }\r\n}\r\n",
    "/**\r\n * Log rotation utilities\r\n *\r\n * Provides date-based log file paths and automatic cleanup of stale logs.\r\n */\r\n\r\nimport { readdir, unlink } from \"node:fs/promises\";\r\nimport { join } from \"node:path\";\r\nimport { LOG_RETENTION_DAYS, LOGS_DIR } from \"../config/constants.js\";\r\nimport { ensureDirectory } from \"./fs-utils.js\";\r\nimport { logger } from \"./logger.js\";\r\n\r\n// Throttle cleanup to run at most once per hour\r\nconst CLEANUP_THROTTLE_MS = 60 * 60 * 1000; // 1 hour\r\nlet lastCleanupTime: Record<string, number> = {};\r\n\r\n/**\r\n * Get current date string in YYYY-MM-DD format (UTC)\r\n */\r\nexport function getDateString(): string {\r\n  return new Date().toISOString().split(\"T\")[0];\r\n}\r\n\r\n/**\r\n * Get date-based log file path\r\n * @param logPrefix - Prefix for the log file (e.g., \"plugin\" or \"sync\")\r\n * @returns Full path like ~/.claude-zest/logs/plugin-2026-01-09.log\r\n */\r\nexport function getDatedLogPath(logPrefix: string): string {\r\n  const dateStr = getDateString();\r\n  return join(LOGS_DIR, `${logPrefix}-${dateStr}.log`);\r\n}\r\n\r\n/**\r\n * Parse date from log filename\r\n * @param filename - Filename like \"plugin-2026-01-09.log\"\r\n * @param logPrefix - Prefix to match (e.g., \"plugin\")\r\n * @returns Date object or null if doesn't match pattern\r\n */\r\nfunction parseDateFromFilename(filename: string, logPrefix: string): Date | null {\r\n  const pattern = new RegExp(`^${logPrefix}-(\\\\d{4}-\\\\d{2}-\\\\d{2})\\\\.log$`);\r\n  const match = filename.match(pattern);\r\n\r\n  if (!match) {\r\n    return null;\r\n  }\r\n\r\n  const date = new Date(match[1] + \"T00:00:00Z\");\r\n  return Number.isNaN(date.getTime()) ? null : date;\r\n}\r\n\r\n/**\r\n * Clean up stale log files older than retention period\r\n * Throttled to run at most once per hour per logPrefix\r\n *\r\n * @param logPrefix - Prefix of logs to clean (e.g., \"plugin\" or \"sync\")\r\n */\r\nexport async function cleanupStaleLogs(logPrefix: string): Promise<void> {\r\n  const now = Date.now();\r\n  const lastCleanup = lastCleanupTime[logPrefix] || 0;\r\n\r\n  // Throttle: skip if cleaned up less than an hour ago\r\n  if (now - lastCleanup < CLEANUP_THROTTLE_MS) {\r\n    return;\r\n  }\r\n\r\n  lastCleanupTime[logPrefix] = now;\r\n\r\n  try {\r\n    await ensureDirectory(LOGS_DIR);\r\n    const files = await readdir(LOGS_DIR);\r\n    const cutoffDate = new Date(now - LOG_RETENTION_DAYS * 24 * 60 * 60 * 1000);\r\n\r\n    for (const file of files) {\r\n      const fileDate = parseDateFromFilename(file, logPrefix);\r\n\r\n      if (fileDate && fileDate < cutoffDate) {\r\n        const filePath = join(LOGS_DIR, file);\r\n        try {\r\n          await unlink(filePath);\r\n        } catch (error) {\r\n          logger.error(`Failed to delete old log file ${file}`, error);\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    logger.error(\"Failed to cleanup old logs\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * Force cleanup regardless of throttle (for daemon startup)\r\n * @param logPrefix - Prefix of logs to clean (e.g., \"plugin\" or \"sync\")\r\n */\r\nexport async function forceCleanupStaleLogs(logPrefix: string): Promise<void> {\r\n  // Reset throttle to force cleanup\r\n  lastCleanupTime[logPrefix] = 0;\r\n  await cleanupStaleLogs(logPrefix);\r\n}\r\n",
    "/**\r\n * Application constants and configuration values\r\n */\r\n\r\nimport { homedir } from \"node:os\";\r\nimport { join } from \"node:path\";\r\n\r\n// Claude Code directories\r\n// Respects CLAUDE_INSTALL_PATH environment variable for non-standard installations\r\nexport const CLAUDE_INSTALL_DIR = process.env.CLAUDE_INSTALL_PATH || join(homedir(), \".claude\");\r\nexport const CLAUDE_PROJECTS_DIR = join(CLAUDE_INSTALL_DIR, \"projects\");\r\nexport const CLAUDE_SETTINGS_FILE = join(CLAUDE_INSTALL_DIR, \"settings.json\");\r\n\r\n// Base directories\r\nexport const CLAUDE_ZEST_DIR = join(CLAUDE_INSTALL_DIR, \"..\", \".claude-zest\");\r\nexport const QUEUE_DIR = join(CLAUDE_ZEST_DIR, \"queue\");\r\nexport const LOGS_DIR = join(CLAUDE_ZEST_DIR, \"logs\");\r\nexport const STATE_DIR = join(CLAUDE_ZEST_DIR, \"state\");\r\nexport const DELETION_CACHE_DIR = join(CLAUDE_ZEST_DIR, \"cache\", \"deletions\");\r\n\r\n// File paths\r\nexport const SESSION_FILE = join(CLAUDE_ZEST_DIR, \"session.json\"); // Auth session + workspace info\r\nexport const SETTINGS_FILE = join(CLAUDE_ZEST_DIR, \"settings.json\"); // User preferences\r\nexport const DAEMON_PID_FILE = join(CLAUDE_ZEST_DIR, \"daemon.pid\");\r\nexport const STATUSLINE_SCRIPT_PATH = join(CLAUDE_ZEST_DIR, \"statusline.mjs\"); // Status line script (.mjs for ESM support)\r\nexport const STATUS_CACHE_FILE = join(CLAUDE_ZEST_DIR, \"status-cache.json\"); // Status cache for version checks and sync errors\r\n\r\n// Queue files\r\nexport const EVENTS_QUEUE_FILE = join(QUEUE_DIR, \"events.jsonl\");\r\nexport const SESSIONS_QUEUE_FILE = join(QUEUE_DIR, \"chat-sessions.jsonl\");\r\nexport const MESSAGES_QUEUE_FILE = join(QUEUE_DIR, \"chat-messages.jsonl\");\r\n\r\n// Platform and source identifiers\r\nexport const PLATFORM = \"terminal\";\r\nexport const SOURCE = \"claude-code\";\r\nexport const CLIENT_ID = \"claude-cli\";\r\n\r\n// Sync configuration\r\nexport const SYNC_INTERVAL_MS = 60000; // 60 seconds\r\nexport const MAX_RETRY_ATTEMPTS = 3;\r\nexport const RETRY_BACKOFF_MS = 5000;\r\n\r\n// File locking configuration\r\nexport const LOCK_RETRY_MS = 50; // Retry interval when lock is held by another process\r\nexport const LOCK_MAX_RETRIES = 300; // Max retries (10 seconds total)\r\n\r\n// Debounce configuration (prevents duplicate hook executions)\r\nexport const DEBOUNCE_DIR = join(CLAUDE_ZEST_DIR, \"debounce\");\r\nexport const DEBOUNCE_WINDOW_MS = 500; // First-wins debounce window\r\nexport const DEBOUNCE_TRAILING_MS = 300; // Trailing debounce: wait after last hook before processing\r\n\r\n// Delayed extraction configuration (for PostToolUse trailing debounce)\r\nexport const DELAYED_EXTRACTION_INITIAL_DELAY_MS = 500; // Initial wait before checking if hooks settled\r\nexport const DELAYED_EXTRACTION_MAX_WAIT_MS = 10000; // Maximum total wait time\r\nexport const DELAYED_EXTRACTION_CHECK_INTERVAL_MS = 300; // How often to check if hooks settled\r\n\r\n// Cache configuration\r\nexport const DELETION_CACHE_TTL_MS = 5 * 60 * 1000; // 5 minutes\r\n\r\n// Log rotation configuration\r\nexport const LOG_RETENTION_DAYS = 7; // Delete log files older than 7 days\r\n\r\n// Authentication configuration\r\nexport const PROACTIVE_REFRESH_THRESHOLD_MS = 5 * 60 * 1000; // Proactively refresh JWT/access tokens 5 minutes before expiration\r\n\r\n// Content size limits\r\nexport const MAX_DIFF_SIZE_BYTES = 10 * 1024 * 1024; // 10MB\r\nexport const MAX_CONTENT_PREVIEW_LENGTH = 1000; // characters\r\nexport const MAX_SESSION_TITLE_LENGTH = 100; // characters\r\nexport const MIN_SESSION_TITLE_LENGTH = 3; // characters\r\n\r\n// Session quality filters\r\nexport const MIN_MESSAGES_PER_SESSION = 3; // Minimum messages required to upload a session\r\nexport const STALE_SESSION_AGE_MS = 7 * 24 * 60 * 60 * 1000; // 7 days in milliseconds\r\n\r\n// API endpoints (configured from .env at build time)\r\n// Values are baked into the bundle during build\r\nexport const WEB_APP_URL = process.env.ZEST_WEB_APP_URL || \"http://localhost:3000\";\r\nexport const SUPABASE_URL = process.env.ZEST_SUPABASE_URL || \"\";\r\nexport const SUPABASE_ANON_KEY = process.env.ZEST_SUPABASE_ANON_KEY || \"\";\r\n\r\n// PostHog analytics (configured from .env at build time)\r\nexport const POSTHOG_API_KEY = process.env.POSTHOG_API_KEY || \"\";\r\n\r\n// Filter patterns for commands/messages to exclude from tracking\r\nexport const EXCLUDED_COMMAND_PATTERNS = [\r\n  // Claude Code built-in commands\r\n  /^\\/(add-dir|agents|bashes|bug|clear|compact|config|context|cost|doctor|exit|export|help|hooks|ide|init|install-github-app|login|logout|mcp|memory|model|output-style|permissions|plugin|pr-comments|privacy-settings|release-notes|resume|review|rewind|sandbox|security-review|stats|status|statusline|terminal-setup|todos|usage|vim)\\b/i,\r\n\r\n  // Zest plugin commands (like /zest:status, /zest:login, etc.)\r\n  /^\\/zest[^:\\s]*:/i,\r\n\r\n  // Messages containing Zest command tags (e.g., <command-name>/zest:status</command-name>)\r\n  /<command-name>\\/zest[^<]*<\\/command-name>/i,\r\n\r\n  // Messages containing Zest CLI script paths (e.g., \"node .../dist/commands/sync-cli.js\")\r\n  /node\\s+.*\\/dist\\/commands\\/.*-cli\\.js/i,\r\n];\r\n\r\nexport const ZEST_SESSION_NAMESPACE = \"1b671a64-40d5-491e-99b0-da01ff1f3341\";\r\n\r\n// Version check configuration\r\n// If ZEST_MARKETPLACE_PLUGIN_JSON_URL is not set, version checking will be disabled\r\nexport const MARKETPLACE_PLUGIN_JSON_URL = process.env.ZEST_MARKETPLACE_PLUGIN_JSON_URL || \"\";\r\nexport const VERSION_CHECK_TIMEOUT_MS = 5000; // 5 seconds\r\nexport const UPDATE_CHECK_CACHE_TTL_MS = 60 * 60 * 1000; // 1 hour - how long to cache update check results\r\n\r\n// Daemon management configuration\r\nexport const DAEMON_FRESH_PID_THRESHOLD_MS = 2000; // 2 seconds - how recently PID file must be modified to skip restart\r\n",
    "/**\r\n * Node.js file system adapter for the privacy-redaction package.\r\n *\r\n * Implements the FileSystemAdapter interface using Node.js fs APIs.\r\n * This enables the privacy package to read files, check existence, and\r\n * list directories in the Claude Code CLI plugin context.\r\n */\r\n\r\nimport { readFile, readdir, stat } from \"node:fs/promises\";\r\nimport type { FileSystemAdapter } from \"@zest/privacy-redaction\";\r\n\r\n/**\r\n * Create a Node.js file system adapter for the privacy package.\r\n *\r\n * @param workspaceRoot - The root directory of the current workspace/project\r\n * @returns FileSystemAdapter implementation using Node.js fs APIs\r\n */\r\nexport function createNodeFsAdapter(workspaceRoot?: string): FileSystemAdapter {\r\n  return {\r\n    /**\r\n     * Read file contents as UTF-8 string\r\n     */\r\n    async readFile(path: string): Promise<string> {\r\n      return readFile(path, \"utf-8\");\r\n    },\r\n\r\n    /**\r\n     * Check if a file exists at the given path\r\n     */\r\n    async fileExists(path: string): Promise<boolean> {\r\n      try {\r\n        await stat(path);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * List files and directories in a directory\r\n     */\r\n    async readDir(path: string): Promise<string[]> {\r\n      return readdir(path);\r\n    },\r\n\r\n    /**\r\n     * Get the workspace root directory\r\n     */\r\n    getWorkspaceRoot(): string | undefined {\r\n      return workspaceRoot;\r\n    },\r\n  };\r\n}\r\n",
    "/**\r\n * Privacy Manager for Claude Code Plugin.\r\n *\r\n * Coordinates privacy redaction across the plugin, providing a singleton\r\n * instance that integrates with the privacy-redaction package.\r\n *\r\n * Responsibilities:\r\n * - Initialize privacy service on session start\r\n * - Load configuration from user settings\r\n * - Provide redaction methods for extraction and queuing\r\n * - Track privacy statistics for debugging\r\n */\r\n\r\nimport {\r\n  createPrivacyConfig,\r\n  DEFAULT_PRIVACY_CONFIG,\r\n  PrivacyService,\r\n  type PrivacyConfig,\r\n  type ProcessResult,\r\n} from \"@zest/privacy-redaction\";\r\nimport { logger } from \"../utils/logger.js\";\r\nimport { createNodeFsAdapter } from \"./node-fs-adapter.js\";\r\n\r\n/** Privacy configuration stored in user settings */\r\nexport interface PrivacySettings {\r\n  /** How to handle detected sensitive data */\r\n  approach: \"detection\" | \"encryption\" | \"hybrid\";\r\n  /** Enable aggressive detection (more patterns, more false positives) */\r\n  aggressiveMode: boolean;\r\n  /** Respect .gitignore for file exclusion */\r\n  enableGitignore: boolean;\r\n  /** Respect .zest.rules for file exclusion */\r\n  enableZestRules: boolean;\r\n  /** Additional glob patterns for file exclusion */\r\n  customExclusionPatterns: string[];\r\n}\r\n\r\n/** Default privacy settings */\r\nexport const DEFAULT_PRIVACY_SETTINGS: PrivacySettings = {\r\n  approach: \"detection\",\r\n  aggressiveMode: false,\r\n  enableGitignore: true,\r\n  enableZestRules: true,\r\n  customExclusionPatterns: [],\r\n};\r\n\r\n/** Singleton instance of the privacy manager */\r\nlet privacyManagerInstance: PrivacyManager | null = null;\r\n\r\n/**\r\n * Privacy Manager - coordinates privacy redaction for the Claude Code plugin.\r\n *\r\n * Use the singleton pattern via `getPrivacyManager()` to ensure consistent\r\n * privacy handling across the plugin.\r\n */\r\nexport class PrivacyManager {\r\n  private service: PrivacyService | null = null;\r\n  private initialized = false;\r\n  private projectDir: string | undefined;\r\n\r\n  /**\r\n   * Initialize the privacy manager for a project.\r\n   *\r\n   * @param projectDir - The root directory of the current project\r\n   * @param settings - Optional privacy settings (uses defaults if not provided)\r\n   */\r\n  async initialize(projectDir?: string, settings?: Partial<PrivacySettings>): Promise<void> {\r\n    if (this.initialized && this.projectDir === projectDir) {\r\n      logger.debug(\"Privacy manager already initialized for this project\");\r\n      return;\r\n    }\r\n\r\n    this.projectDir = projectDir;\r\n\r\n    // Create config from settings\r\n    const config = this.settingsToConfig(settings);\r\n\r\n    // Create privacy service with Node.js file system adapter\r\n    this.service = new PrivacyService({\r\n      config,\r\n      fs: createNodeFsAdapter(projectDir),\r\n      enableCache: true,\r\n    });\r\n\r\n    // Initialize service (loads .gitignore and .zest.rules)\r\n    await this.service.initialize();\r\n    this.initialized = true;\r\n\r\n    logger.debug(\"Privacy manager initialized\", {\r\n      projectDir,\r\n      patternCount: this.service.getActivePatternCount(),\r\n      exclusionCounts: this.service.getExclusionPatternCounts(),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if the privacy manager is initialized.\r\n   */\r\n  isInitialized(): boolean {\r\n    return this.initialized && this.service !== null;\r\n  }\r\n\r\n  /**\r\n   * Process content for sensitive data detection and redaction.\r\n   *\r\n   * @param content - The text content to process\r\n   * @param filePath - Optional file path for context\r\n   * @returns Processed result with redacted content, or original if not initialized\r\n   */\r\n  processContent(content: string, filePath?: string): ProcessResult {\r\n    if (!this.service || !this.initialized) {\r\n      // Return original content if not initialized\r\n      return {\r\n        content,\r\n        detections: [],\r\n        hasSensitiveData: false,\r\n        wasRedacted: false,\r\n      };\r\n    }\r\n\r\n    return this.service.processContent(content, filePath);\r\n  }\r\n\r\n  /**\r\n   * Redact sensitive data from a message content string.\r\n   *\r\n   * @param content - The message content to redact\r\n   * @returns Redacted content string\r\n   */\r\n  redactMessage(content: string): string {\r\n    if (!this.service || !this.initialized) {\r\n      return content;\r\n    }\r\n\r\n    const result = this.service.processContent(content);\r\n    if (result.wasRedacted) {\r\n      logger.debug(\"Redacted sensitive data from message\", {\r\n        detections: result.detections.length,\r\n        patterns: result.detections.map((d) => d.pattern),\r\n      });\r\n    }\r\n    return result.content;\r\n  }\r\n\r\n  /**\r\n   * Redact sensitive data from a diff string.\r\n   *\r\n   * @param diff - The diff content to redact\r\n   * @param filePath - Optional file path for context\r\n   * @returns Redacted diff string\r\n   */\r\n  redactDiff(diff: string, filePath?: string): string {\r\n    if (!this.service || !this.initialized) {\r\n      return diff;\r\n    }\r\n\r\n    const result = this.service.processContent(diff, filePath);\r\n    if (result.wasRedacted) {\r\n      logger.debug(\"Redacted sensitive data from diff\", {\r\n        filePath,\r\n        detections: result.detections.length,\r\n      });\r\n    }\r\n    return result.content;\r\n  }\r\n\r\n  /**\r\n   * Check if a file should be excluded from telemetry.\r\n   *\r\n   * @param filePath - Absolute path to the file\r\n   * @returns True if file should be excluded\r\n   */\r\n  shouldExcludeFile(filePath: string): boolean {\r\n    if (!this.service || !this.initialized) {\r\n      return false;\r\n    }\r\n\r\n    const result = this.service.shouldExcludeFile(filePath);\r\n    if (result.excluded) {\r\n      logger.debug(\"File excluded from telemetry\", {\r\n        filePath,\r\n        reason: result.reason,\r\n        matchedRule: result.matchedRule,\r\n      });\r\n    }\r\n    return result.excluded;\r\n  }\r\n\r\n  /**\r\n   * Update privacy configuration.\r\n   *\r\n   * @param settings - New privacy settings\r\n   */\r\n  async updateSettings(settings: Partial<PrivacySettings>): Promise<void> {\r\n    if (!this.service) {\r\n      logger.warn(\"Cannot update settings: Privacy manager not initialized\");\r\n      return;\r\n    }\r\n\r\n    const config = this.settingsToConfig(settings);\r\n    await this.service.updateConfig(config);\r\n\r\n    logger.debug(\"Privacy settings updated\", settings);\r\n  }\r\n\r\n  /**\r\n   * Get privacy statistics.\r\n   */\r\n  getStats(): { totalDetections: number; filesProcessed: number; filesExcluded: number } | null {\r\n    if (!this.service || !this.initialized) {\r\n      return null;\r\n    }\r\n\r\n    const stats = this.service.getStats();\r\n    return {\r\n      totalDetections: stats.detection.totalDetections,\r\n      filesProcessed: stats.filesProcessed,\r\n      filesExcluded: stats.filesExcluded,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Clear caches and reset statistics.\r\n   */\r\n  reset(): void {\r\n    if (this.service) {\r\n      this.service.clearAll();\r\n    }\r\n    this.initialized = false;\r\n    this.projectDir = undefined;\r\n    logger.debug(\"Privacy manager reset\");\r\n  }\r\n\r\n  /**\r\n   * Convert user settings to privacy config format.\r\n   */\r\n  private settingsToConfig(settings?: Partial<PrivacySettings>): Partial<PrivacyConfig> {\r\n    if (!settings) {\r\n      return {};\r\n    }\r\n\r\n    return {\r\n      approach: settings.approach,\r\n      aggressiveMode: settings.aggressiveMode,\r\n      enableGitignore: settings.enableGitignore,\r\n      enableZestRules: settings.enableZestRules,\r\n      customExclusionPatterns: settings.customExclusionPatterns,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get the singleton privacy manager instance.\r\n *\r\n * The manager must be initialized with `initialize()` before use.\r\n */\r\nexport function getPrivacyManager(): PrivacyManager {\r\n  if (!privacyManagerInstance) {\r\n    privacyManagerInstance = new PrivacyManager();\r\n  }\r\n  return privacyManagerInstance;\r\n}\r\n\r\n/**\r\n * Reset the singleton privacy manager instance.\r\n * Useful for testing or when project context changes.\r\n */\r\nexport function resetPrivacyManager(): void {\r\n  if (privacyManagerInstance) {\r\n    privacyManagerInstance.reset();\r\n    privacyManagerInstance = null;\r\n  }\r\n}\r\n"
  ],
  "mappings": "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",
  "debugId": "E952D2359724FC1064756E2164756E21",
  "names": []
}